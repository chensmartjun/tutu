(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40bbb39e"],{"0163":function(t,e,a){"use strict";var l=a("2a14"),o=a.n(l);o.a},"2a14":function(t,e,a){},"800d":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{background:"#fff",padding:"20px"}},[1==t.perData.allow_print?a("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"info"},on:{click:t.outExcel}},[t._v("导出Excel")]):t._e(),a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"select_warpper"},[a("el-form",{attrs:{inline:!0,model:t.form}},[a("el-form-item",{staticStyle:{margin:"0px",padding:"0px"},attrs:{label:""}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入条码号"},model:{value:t.form.barcode_no,callback:function(e){t.$set(t.form,"barcode_no",e)},expression:"form.barcode_no"}})],1),a("el-form-item",{staticStyle:{"margin-left":"10px",padding:"0px"},attrs:{label:""}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入规格"},model:{value:t.form.specs,callback:function(e){t.$set(t.form,"specs",e)},expression:"form.specs"}})],1)],1)],1),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("筛选")])],1)]),a("div",{staticClass:"totaltable",staticStyle:{"margin-top":"30px",clear:"both"}},[a("el-table",{staticStyle:{width:"100%","font-size":"14px"},attrs:{data:t.dtlArr,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center"}}),a("el-table-column",{attrs:{prop:"type_name",label:"类型"}}),a("el-table-column",{attrs:{prop:"bill_no",label:"单据编号",width:"150"}}),a("el-table-column",{attrs:{prop:"bill_date",label:"单据日期",width:"180"}}),a("el-table-column",{attrs:{prop:"add_date",label:"更新日期",width:"180"}}),a("el-table-column",{attrs:{prop:"counter_name",label:"柜台",width:"150"}}),a("el-table-column",{attrs:{prop:"style_name",label:"产品",width:"150"}}),a("el-table-column",{attrs:{prop:"gold_name",label:"金成色"}}),a("el-table-column",{attrs:{prop:"pl_name",label:"品类"}}),a("el-table-column",{attrs:{prop:"kind_name",label:"品目"}}),a("el-table-column",{attrs:{prop:"wgt",label:"重量"}}),a("el-table-column",{attrs:{prop:"wgt_prc",label:"重单价"}}),a("el-table-column",{attrs:{prop:"qty",label:"数量"}}),a("el-table-column",{attrs:{prop:"qty_prc",label:"数单价"}}),a("el-table-column",{attrs:{prop:"specs",label:"规格"}}),a("el-table-column",{attrs:{prop:"trans_wgt",label:"折后重"}}),a("el-table-column",{attrs:{prop:"amt",label:"金额"}})],1)],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":t.form.page,"page-size":t.form.page_size,"page-sizes":[10,20,30],total:t.pageTotal},on:{"current-change":t.handlePageChange,"size-change":t.pageSizeChange}})],1)],1)},o=[],n=(a("34ef"),a("28a5"),a("fd03")),r=(a("add5"),a("c0e9")),s=a.n(r),i={name:"inOut",data:function(){return{dtlArr:[],arr:[],pageTotal:0,img:"",perData:"",systemSet:"",username:"",pullData:{},searchQuery:{},form:{page:1,page_size:10}}},watch:{},created:function(){this.getPermission(),this.getSystem(),console.log(this.dtlArr.length)},methods:{search:function(){this.form.page=1,this.selectTable()},selectTable:function(){var t=this;this.$load.show(),Object(n["ij"])(this.form).then((function(e){console.log(e),t.$load.close(),2e3==e.code?(console.log(e.data),t.dtlArr=e.data.data,t.pageTotal=e.data.page_total):t.$message.error(e.data.info)}))},toImg:function(){var t=this;setTimeout((function(){s()(t.$refs.print,{backgroundColor:"white",useCORS:!0,windowHeight:document.body.scrollHeight}).then((function(e){var a=e.toDataURL();t.img=a,t.download()}))}))},printContext:function(){this.$print(this.$refs.print)},download:function(){var t=this.img;this.downloadFile("成品履历.png",t)},downloadFile:function(t,e){var a=document.createElement("a"),l=this.base64ToBlob(e),o=document.createEvent("HTMLEvents");o.initEvent("click",!0,!0),a.download=t,a.href=URL.createObjectURL(l),a.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))},base64ToBlob:function(t){for(var e=t.split(";base64,"),a=e[0].split(":")[1],l=window.atob(e[1]),o=l.length,n=new Uint8Array(o),r=0;r<o;++r)n[r]=l.charCodeAt(r);return new Blob([n],{type:a})},handlePageChange:function(t){this.form.page=t,this.selectTable()},pageSizeChange:function(t){this.form.page=1,this.form.page_size=t,this.selectTable()},getPermission:function(){var t=this;Object(n["xb"])({id:"106"}).then((function(e){2e3==e.code?(t.perData=e.data,t.username=e.data.login_staff):t.$message.error(e.msg)}))},getSystem:function(){var t=this;Object(n["gg"])({}).then((function(e){2e3==e.code?t.systemSet=e.data:t.$message.error(e.data.info)}))},outExcel:function(){this.form.barcode_no?this.form.specs||(this.form.specs=""):this.form.barcode_no="",window.location="".concat(this.$baseURL,"chengphistory_export?barcode_no=").concat(this.form.barcode_no,"&specs=").concat(this.form.specs)}}},c=i,p=(a("0163"),a("2877")),d=Object(p["a"])(c,l,o,!1,null,"6c295e01",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-40bbb39e.9652c143.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a301c60"],{"4f8c":function(t,e,a){"use strict";var n=a("949d"),l=a.n(n);l.a},"71e6":function(t,e,a){},"949d":function(t,e,a){},af45:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"orderman"},[n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("img",{class:null==t.prev?"gray":"",staticStyle:{width:"30px",transform:"rotate(180deg)"},attrs:{src:a("b887"),alt:""},on:{click:function(e){1!=t.isAdd&&1!=!t.isedit&&t.firstPage()}}}),n("img",{class:null==t.prev?"gray":"",staticStyle:{width:"30px",transform:"rotate(180deg)",margin:"0 15px"},attrs:{src:a("e484"),alt:""},on:{click:function(e){1!=t.isAdd&&1!=!t.isedit&&t.prevPage()}}}),n("img",{class:null==t.next?"gray":"",staticStyle:{width:"30px","margin-right":"15px"},attrs:{src:a("e484"),alt:""},on:{click:function(e){1!=t.isAdd&&1!=!t.isedit&&t.nextPage()}}}),n("img",{class:null==t.next?"gray":"",staticStyle:{width:"30px"},attrs:{src:a("b887"),alt:""},on:{click:function(e){1!=t.isAdd&&1!=!t.isedit&&t.lastPage()}}}),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning",icon:"el-icon-refresh",size:"mini"},on:{click:function(e){t.outData.isshow=!0}}},[t._v("筛选")]),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",icon:"el-icon-download",size:"mini"},on:{click:t.showOut}},[t._v("导出")])],1),n("div",{staticStyle:{float:"right"}},[1==t.perData.allow_add?n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus",disabled:t.isAdd||!t.isedit},on:{click:t.add}},[t._v("新建")]):t._e(),1==t.perData.allow_edit?n("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-edit",disabled:t.isAdd||!t.isedit||t.isCheck||t.nullBtn},on:{click:t.handelEdit}},[t._v("修改")]):t._e(),1==t.perData.allow_dele?n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",disabled:t.isAdd||!t.isedit||t.isCheck||t.nullBtn},on:{click:t.delOrder}},[t._v("删除")]):t._e(),1==t.perData.allow_edit||1==t.perData.allow_add?n("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"success",size:"mini",icon:"el-icon-document-checked",disabled:t.nullBtn||t.isedit},on:{click:t.saveIt}},[t._v("保存")]):t._e(),n("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-refresh-left",disabled:t.isCheck||t.nullBtn||t.isedit},on:{click:function(e){return t.refreshData(t.form.order_no)}}},[t._v("撤回")]),1==t.perData.allow_print?n("el-button",{attrs:{type:"primary",size:"mini",disabled:t.isAdd||!t.isedit||t.nullBtn,icon:"el-icon-printer"},on:{click:t.printOut}},[t._v("打印")]):t._e(),1==t.perData.allow_check?n("div",{staticClass:"checkboxProOreder"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.check,expression:"form.check"}],attrs:{type:"checkbox",disabled:t.isAdd||!t.isedit,name:"审核"},domProps:{checked:1==t.form.check,checked:Array.isArray(t.form.check)?t._i(t.form.check,null)>-1:t.form.check},on:{change:[function(e){var a=t.form.check,n=e.target,l=!!n.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);n.checked?r<0&&t.$set(t.form,"check",a.concat([i])):r>-1&&t.$set(t.form,"check",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.form,"check",l)},function(e){return t.isEdit(t.form.check)}]}}),n("span",{staticStyle:{"margin-left":"10px","margin-top":"10px","font-weight":"bold",color:"red"}},[t._v("审核")])]):t._e()],1)]),n("div",{staticStyle:{"text-align":"right","margin-top":"5px"}},[n("el-button",{attrs:{type:"warning",disabled:t.isAdd||!t.isedit,size:"mini"},on:{click:function(e){t.checkData.isshow=!0}}},[t._v("批量审核")])],1),n("el-form",{ref:"form",staticClass:"topForm",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[n("el-row",{staticClass:"modify",attrs:{gutter:5}},[n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"创建人："}},[n("el-input",{attrs:{disabled:""},model:{value:t.form.build_name,callback:function(e){t.$set(t.form,"build_name",e)},expression:"form.build_name"}})],1)],1),n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"修改人："}},[n("el-input",{attrs:{disabled:""},model:{value:t.form.modify_name,callback:function(e){t.$set(t.form,"modify_name",e)},expression:"form.modify_name"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"创建时间："}},[n("el-input",{attrs:{disabled:""},model:{value:t.form.build_date,callback:function(e){t.$set(t.form,"build_date",e)},expression:"form.build_date"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"修改时间："}},[n("el-input",{attrs:{disabled:""},model:{value:t.form.modify_date,callback:function(e){t.$set(t.form,"modify_date",e)},expression:"form.modify_date"}})],1)],1),n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"审核人："}},[n("el-input",{attrs:{disabled:""},model:{value:t.form.check_name,callback:function(e){t.$set(t.form,"check_name",e)},expression:"form.check_name"}})],1)],1)],1),n("el-container",{staticStyle:{background:"#fff","border-radius":"15px","padding-top":"20px","padding-right":"20px","margin-bottom":"10px"}},[n("el-main",{staticStyle:{padding:"0 20px 0 0"}},[n("el-row",{attrs:{gutter:5}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"订单单号"}},[n("el-input",{attrs:{disabled:""},model:{value:t.form.order_no,callback:function(e){t.$set(t.form,"order_no",e)},expression:"form.order_no"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"订单日期",prop:"order_date"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",disabled:t.isedit,"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:t.form.order_date,callback:function(e){t.$set(t.form,"order_date",e)},expression:"form.order_date"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"出货日期"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",disabled:t.isedit,"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择开始日期"},model:{value:t.form.out_beigndate,callback:function(e){t.$set(t.form,"out_beigndate",e)},expression:"form.out_beigndate"}})],1)],1),n("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[t._v("---")]),n("el-col",{attrs:{span:5}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",disabled:t.isedit,"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束日期"},model:{value:t.form.out_enddate,callback:function(e){t.$set(t.form,"out_enddate",e)},expression:"form.out_enddate"}})],1)],1),n("el-row",{attrs:{gutter:5}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"客户别名"}},[n("el-input",{attrs:{disabled:t.isedit},model:{value:t.form.cust_add,callback:function(e){t.$set(t.form,"cust_add",e)},expression:"form.cust_add"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"客户名称",prop:"cust_no"}},[n("el-select",{attrs:{clearable:"","default-first-option":"",filterable:"",placeholder:"请选择",disabled:t.isedit},on:{"visible-change":function(e){return t.getRefreshPull()},change:function(e){return t.refreshs()}},model:{value:t.form.cust_no,callback:function(e){t.$set(t.form,"cust_no",e)},expression:"form.cust_no"}},t._l(t.pull_cust,(function(t,e){return n("el-option",{key:e,attrs:{label:t.cust_no+" - "+t.cust_name,value:t.cust_no}})})),1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"金成色",prop:"gold_no"}},[n("label",{attrs:{slot:"label"},slot:"label"},[t._v("金  成  色")]),n("el-select",{attrs:{clearable:"","default-first-option":"",filterable:"",placeholder:"请选择",disabled:t.isedit},on:{change:function(e){return t.refreshs()},"visible-change":function(e){return t.getRefreshPull()}},model:{value:t.form.gold_no,callback:function(e){t.$set(t.form,"gold_no",e)},expression:"form.gold_no"}},t._l(t.pull_gold,(function(t,e){return n("el-option",{key:e,attrs:{label:t.kind_no+" - "+t.kind_name,value:t.kind_no}})})),1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"订单类型",prop:"ordertype_no"}},[n("el-select",{attrs:{clearable:"","default-first-option":"",filterable:"",placeholder:"请选择",disabled:t.isedit},on:{change:function(e){return t.refreshs()},"visible-change":function(e){return t.getRefreshPull()}},model:{value:t.form.ordertype_no,callback:function(e){t.$set(t.form,"ordertype_no",e)},expression:"form.ordertype_no"}},t._l(t.pull_ordertype,(function(t,e){return n("el-option",{key:e,attrs:{label:t.kind_no+" - "+t.kind_name,value:t.kind_no}})})),1)],1)],1)],1),n("el-row",{attrs:{gutter:5}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"定价日期"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",disabled:t.isedit,"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:t.form.goldprc_date,callback:function(e){t.$set(t.form,"goldprc_date",e)},expression:"form.goldprc_date"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"定价"}},[n("label",{attrs:{slot:"label"},slot:"label"},[t._v("定       价")]),n("el-input",{attrs:{disabled:t.isedit,type:"number"},model:{value:t.form.goldprc,callback:function(e){t.$set(t.form,"goldprc",e)},expression:"form.goldprc"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"接单人"}},[n("label",{attrs:{slot:"label"},slot:"label"},[t._v("接  单  人")]),n("el-select",{attrs:{clearable:"","default-first-option":"",filterable:"",placeholder:"请选择",disabled:t.isedit},on:{"visible-change":function(e){return t.getRefreshPull()},change:function(e){return t.refreshs()}},model:{value:t.form.receive_no,callback:function(e){t.$set(t.form,"receive_no",e)},expression:"form.receive_no"}},t._l(t.pull_receive,(function(t,e){return n("el-option",{key:e,attrs:{label:t.login_staff+" - "+t.staffr_name,value:t.login_staff}})})),1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"字印编号"}},[n("el-select",{attrs:{clearable:"","default-first-option":"",filterable:"",placeholder:"请选择",disabled:t.isedit},on:{"visible-change":function(e){return t.getRefreshPull()},change:function(e){return t.refreshs()}},model:{value:t.form.print_no,callback:function(e){t.$set(t.form,"print_no",e)},expression:"form.print_no"}},t._l(t.pull_print,(function(t,e){return n("el-option",{key:e,attrs:{label:t.kind_no+" - "+t.kind_name,value:t.kind_no}})})),1)],1)],1)],1),n("el-row",{attrs:{gutter:5}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"本单总件数"}},[n("el-input",{attrs:{disabled:t.isedit},model:{value:t.form.all_qty,callback:function(e){t.$set(t.form,"all_qty",e)},expression:"form.all_qty"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"本地总金重"}},[n("el-input",{attrs:{disabled:t.isedit},model:{value:t.form.all_wgt,callback:function(e){t.$set(t.form,"all_wgt",e)},expression:"form.all_wgt"}})],1)],1),n("el-col",{attrs:{span:9}},[n("el-form-item",{attrs:{label:"备注"}},[n("label",{attrs:{slot:"label"},slot:"label"},[t._v("备       注")]),n("el-input",{attrs:{type:"textarea",rows:1,disabled:t.isedit},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"checkboxPro1"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.urgent,expression:"form.urgent"}],attrs:{type:"checkbox",disabled:t.isedit,name:""},domProps:{checked:1==t.form.urgent,checked:Array.isArray(t.form.urgent)?t._i(t.form.urgent,null)>-1:t.form.urgent},on:{change:[function(e){var a=t.form.urgent,n=e.target,l=!!n.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);n.checked?r<0&&t.$set(t.form,"urgent",a.concat([i])):r>-1&&t.$set(t.form,"urgent",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.form,"urgent",l)},function(e){return t.isReturn(t.form.urgent)}]}}),n("span",{staticStyle:{"margin-left":"10px","margin-top":"10px","font-weight":"bold",color:"red"}},[t._v("加急与否")])])])],1)],1),n("el-aside",{staticClass:"img",attrs:{width:"150px"}},[n("el-carousel",{attrs:{"indicator-position":"none",autoplay:!1,height:"150px"}},t._l(t.imgArr,(function(e){return n("el-carousel-item",{key:e},[n("el-image",{staticStyle:{width:"150px",height:"150px"},attrs:{src:e,alt:""},on:{click:function(a){return t.handlePictureCardPreview(e)}}})],1)})),1)],1)],1)],1),n("div",{staticStyle:{"margin-bottom":"10px","text-align":"right"}},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus",disabled:t.isedit},on:{click:function(e){return t.insertEvent(-1)}}},[t._v("新增数据")]),n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",disabled:t.isedit},on:{click:function(e){return t.removeEvent()}}},[t._v("删除")])],1),n("div",{staticStyle:{"text-align":"center",background:"rgb(128, 0, 0)",color:"#fff","font-size":"12px",padding:"6px 0"}},[t._v("明细")]),n("vxe-table",{ref:"xTable1",attrs:{border:"",stripe:"",resizable:"","keep-source":"",align:"center",height:"400","show-overflow":"","highlight-hover-row":"",loading:t.loading,"keyboard-config":{isArrow:!0,isDel:!0,isEnter:!0,isTab:!0,isEdit:!0,enterToTab:!0},"row-class-name":t.rowChange,data:t.form.dtl,"mouse-config":{selected:!0},"edit-config":{trigger:"click",mode:"cell",icon:"fa fa",activeMethod:t.activeRowMethod}},on:{"cell-click":t.choseIt}},[n("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),n("vxe-table-column",{attrs:{type:"seq",field:"seq",width:"50",title:"序号"}}),n("vxe-table-column",{attrs:{title:"款式编号",width:"150",field:"style_no","edit-render":{}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[n("el-select",{ref:"stylefocus",attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},on:{change:function(e){return t.outSix(a)}},model:{value:a.style_no,callback:function(e){t.$set(a,"style_no",e)},expression:"row.style_no"}},t._l(t.allArr.style,(function(t){return n("el-option",{key:t.style_no,attrs:{label:t.style_no+" - "+t.style_name,value:t.style_no}})})),1)]}},{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t.getSelectLabel2(a.style_no,t.allArr.style)))]}}])}),n("vxe-table-column",{attrs:{field:"qty",title:"数量",width:"120","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"}}}}),n("vxe-table-column",{attrs:{field:"wgt",title:"单件重",width:"120","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"}}}}),n("vxe-table-column",{attrs:{title:"金料重",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(t.countAmount(a).toFixed(t.systemSet.wgt)))])]}}])}),n("vxe-table-column",{attrs:{field:"wgt_prc",title:"客户工费",width:"120","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"}}}}),n("vxe-table-column",{attrs:{field:"qty_prc",title:"件工费",width:"120","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"}}}}),n("vxe-table-column",{attrs:{field:"add_prc",title:"附加费",width:"120","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"}}}}),n("vxe-table-column",{attrs:{title:"品名",width:"150",field:"kind_no","edit-render":{}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},model:{value:a.kind_no,callback:function(e){t.$set(a,"kind_no",e)},expression:"row.kind_no"}},t._l(t.allArr.kind,(function(t){return n("el-option",{key:t.kind_no,attrs:{label:t.kind_no+" - "+t.kind_name,value:t.kind_no}})})),1)]}},{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t.getSelectLabel(a.kind_no,t.allArr.kind)))]}}])}),n("vxe-table-column",{attrs:{title:"品类",width:"150",field:"type_no","edit-render":{}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},model:{value:a.type_no,callback:function(e){t.$set(a,"type_no",e)},expression:"row.type_no"}},t._l(t.allArr.type,(function(t){return n("el-option",{key:t.kind_no,attrs:{label:t.kind_no+" - "+t.kind_name,value:t.kind_no}})})),1)]}},{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t.getSelectLabel(a.type_no,t.allArr.type)))]}}])}),n("vxe-table-column",{attrs:{title:"单位",width:"150",field:"unit_no","edit-render":{}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},model:{value:a.unit_no,callback:function(e){t.$set(a,"unit_no",e)},expression:"row.unit_no"}},t._l(t.allArr.unit,(function(t){return n("el-option",{key:t.kind_no,attrs:{label:t.kind_no+" - "+t.kind_name,value:t.kind_no}})})),1)]}},{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t.getSelectLabel(a.unit_no,t.allArr.unit)))]}}])}),n("vxe-table-column",{attrs:{field:"spec",width:"150",title:"规格","edit-render":{name:"input",attrs:{disabled:t.isedit}}}}),n("vxe-table-column",{attrs:{title:"颜色",width:"150",field:"colour_no","edit-render":{}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},model:{value:a.colour_no,callback:function(e){t.$set(a,"colour_no",e)},expression:"row.colour_no"}},t._l(t.allArr.colour,(function(t){return n("el-option",{key:t.kind_no,attrs:{label:t.kind_no+" - "+t.kind_name,value:t.kind_no}})})),1)]}},{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t.getSelectLabel(a.colour_no,t.allArr.colour)))]}}])}),n("vxe-table-column",{attrs:{field:"cust_add",width:"150",title:"客户要求","edit-render":{name:"input",attrs:{disabled:t.isedit}}}}),n("vxe-table-column",{attrs:{field:"remark",width:"150",align:"left",title:"备注","edit-render":{name:"input",attrs:{disabled:t.isedit},events:{keyup:t.enterFilterEvent}}}})],1),n("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),n("el-dialog",{staticStyle:{padding:"0 20px"},attrs:{title:"筛选",visible:t.outData.isshow,width:"60%"},on:{"update:visible":function(e){return t.$set(t.outData,"isshow",e)}}},[n("div",{staticClass:"box1"},[n("el-button",{attrs:{type:"success",icon:"el-icon-plus",plain:"",circle:""},on:{click:t.showInput}}),t._l(t.bonusData.field,(function(e,a){return n("div",{key:a,staticStyle:{"margin-top":"20px",display:"flex","flex-wrap":"wrap","align-items":"center"}},[n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},on:{change:function(e){return t.selectOne(a)}},model:{value:t.bonusData.field[a],callback:function(e){t.$set(t.bonusData.field,a,e)},expression:"bonusData.field[index]"}},t._l(t.allArr.screen_pull,(function(t){return n("el-option",{key:t.style_no,attrs:{label:t.table_name,value:t.table}})})),1),n("span",{staticStyle:{display:"inline-block",margin:"0 10px"}},[t._v("-")]),n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},on:{change:function(e){return t.selectOne1(a)}},model:{value:t.bonusData.table[a],callback:function(e){t.$set(t.bonusData.table,a,e)},expression:"bonusData.table[index]"}},t._l(t.allArr.screen_pull[t.arr[a]?t.arr[a]:0].field,(function(t){return n("el-option",{key:t.name_no,attrs:{label:t.name,value:t.name_no}})})),1),n("span",{staticStyle:{display:"inline-block",margin:"0 10px"}},[t._v("-")]),n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},model:{value:t.bonusData.condition[a],callback:function(e){t.$set(t.bonusData.condition,a,e)},expression:"bonusData.condition[index]"}},t._l(t.allArr.screen_condition,(function(t){return n("el-option",{key:t.name_no,attrs:{label:t.name,value:t.name_no}})})),1),n("span",{staticStyle:{display:"inline-block",margin:"0 10px"}},[t._v("-")]),t.allArr.screen_pull[t.arr[a]?t.arr[a]:0].field[t.arrs[a]?t.arrs[a]:0].select?n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},model:{value:t.bonusData.parameter[a],callback:function(e){t.$set(t.bonusData.parameter,a,e)},expression:"bonusData.parameter[index]"}},t._l(t.allArr.screen_pull[t.arr[a]?t.arr[a]:0].field[t.arrs[a]?t.arrs[a]:0].select,(function(t){return n("el-option",{key:t.kind_no,attrs:{label:t.kind_name,value:t.kind_no}})})),1):n("el-input",{staticStyle:{width:"20%"},attrs:{placeholder:"请输入"},model:{value:t.bonusData.parameter[a],callback:function(e){t.$set(t.bonusData.parameter,a,e)},expression:"bonusData.parameter[index]"}}),n("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"danger",icon:"el-icon-minus",plain:"",circle:"",size:"small"},nativeOn:{click:function(e){return e.preventDefault(),t.deleteRow(a,t.bonusData.field)}}})],1)}))],2),t.searchData.length?n("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.searchData}},[n("el-table-column",{attrs:{prop:"index",label:"订单单号"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row))])]}}],null,!1,1525313800)}),n("el-table-column",{attrs:{label:"操作",width:"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit"},on:{click:function(a){return t.searchIt(e.row)}}},[t._v("查看详情")])]}}],null,!1,859597681)})],1):t._e(),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.saveOk}},[t._v("确 定")]),n("el-button",{on:{click:function(e){t.outData.isshow=!1}}},[t._v("取 消")])],1)],1),n("el-dialog",{staticStyle:{padding:"0 20px"},attrs:{title:"导出",visible:t.excelData.isshow,width:"60%"},on:{"update:visible":function(e){return t.$set(t.excelData,"isshow",e)}}},[n("div",{staticClass:"pro",staticStyle:{"text-align":"center"}},[n("el-select",{staticStyle:{display:"block",width:"50%",margin:"0 auto"},attrs:{clearable:"","default-first-option":"",placeholder:"请选择"},model:{value:t.excelValue,callback:function(e){t.excelValue=e},expression:"excelValue"}},[n("el-option",{attrs:{label:"订单",value:"订单"}},[t._v("订单")]),n("el-option",{attrs:{label:"订单明细",value:"订单明细"}},[t._v("订单明细")])],1),n("el-input",{staticStyle:{display:"block",width:"50%",margin:"10px auto"},attrs:{placeholder:"请输入订单单号"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),"订单"==t.excelValue?n("el-select",{staticStyle:{display:"block",width:"50%",margin:"0 auto 10px"},attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择客户"},model:{value:t.cust_no,callback:function(e){t.cust_no=e},expression:"cust_no"}},t._l(t.allArr.cust,(function(t,e){return n("el-option",{key:e,attrs:{label:t.cust_name,value:t.cust_no}})})),1):t._e(),"订单"==t.excelValue?n("el-select",{staticStyle:{display:"block",width:"50%",margin:"0 auto 10px"},attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择货币"},model:{value:t.currency_no,callback:function(e){t.currency_no=e},expression:"currency_no"}},t._l(t.allArr.currency,(function(t,e){return n("el-option",{key:e,attrs:{label:t.kind_name,value:t.kind_no}})})),1):t._e(),"订单"==t.excelValue?n("div",{staticStyle:{display:"block",width:"50%",margin:"0 auto 10px"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.order_date,callback:function(e){t.order_date=e},expression:"order_date"}})],1):t._e(),"订单明细"==t.excelValue?n("el-select",{staticStyle:{display:"block",width:"50%",margin:"0 auto 10px"},attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择产品"},model:{value:t.style_no,callback:function(e){t.style_no=e},expression:"style_no"}},t._l(t.allArr.style,(function(t,e){return n("el-option",{key:e,attrs:{label:t.style_name,value:t.style_no}})})),1):t._e(),n("div",{staticStyle:{display:"flex","align-items":"center","margin-top":"30px","justify-content":"center"}},[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",icon:"el-icon-download"},on:{click:t.outExcel}},[t._v("导出")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:t.outTem}},[t._v("模板导出")])],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.excelData.isshow=!1}}},[t._v("取 消")])],1)]),n("el-dialog",{staticStyle:{padding:"0 0 20px"},attrs:{title:"打印",visible:t.printData.isshow,width:"60%"},on:{"update:visible":function(e){return t.$set(t.printData,"isshow",e)}}},[n("div",{ref:"print",staticClass:"printBox",staticStyle:{"page-break-after":"always",padding:"10px"},attrs:{id:"print"}},[t.systemSet.company?n("p",{staticClass:"company"},[t._v(t._s(t.systemSet.company))]):t._e(),n("p",{staticClass:"printTitle"},[t._v("首饰加工订单")]),n("div",{staticClass:"printToppp",staticStyle:{margin:"5px 0 0"}},[n("div",[n("div",{staticStyle:{"font-size":"12px"}},[n("label",{staticStyle:{"font-size":"12px"}},[t._v("客户简称：")]),t._v(t._s(t.custP.cust_name))]),n("div",{staticStyle:{"font-size":"12px"}},[n("label",{staticStyle:{"font-size":"12px"}},[t._v("备      注：")]),t._v(t._s(t.printList.remark)+"\n                    ")])]),n("div",[n("div",{staticStyle:{"font-size":"12px"}},[n("label",{staticStyle:{"font-size":"12px"}},[t._v("金成色：")]),t._v(t._s(t.goldD.kind_name))]),n("div",{staticStyle:{"font-size":"12px"}},[n("label",{staticStyle:{"font-size":"12px"}},[t._v("接单人：")]),t._v(t._s(t.receiveD?t.receiveD.staffr_name:"")+"\n                    ")])]),n("div",{staticStyle:{"margin-left":"50px"}},[n("p",{staticStyle:{"font-weight":"bold","font-size":"12px"}},[n("label",{staticStyle:{"font-size":"12px"}},[t._v("单     号：")]),t._v(t._s(t.printList.order_no)+"\n                    ")]),n("p",{staticStyle:{"font-size":"12px"}},[n("label",{staticStyle:{"font-size":"12px"}},[t._v("日     期：")]),t._v(t._s(t.printList.order_date)+"\n                    ")])])]),n("div",{staticStyle:{"border-bottom":"1px solid rgb(7, 16, 114)",margin:"0px 0 10px","padding-bottom":"5px",color:"#000",display:"flex","justify-content":"space-between"}},[n("div",[n("label",{staticStyle:{"font-size":"12px",color:"rgb(7, 16, 114)","font-weight":"bold"}},[t._v("出货日期：")]),t._v(t._s(t.printList.out_beigndate)+" 至 "+t._s(t.printList.out_enddate)+"\n                ")]),n("div",[n("label",{staticStyle:{"font-size":"12px",color:"rgb(7, 16, 114)","font-weight":"bold"}},[t._v("定价日期：")]),t._v(t._s(t.printList.goldprc_date)+"\n                ")])]),n("table",{attrs:{border:"1",cellpadding:"0",cellspacing:"0"}},[n("tr",{attrs:{align:"center"}},[n("th",[t._v("序号")]),n("th",[t._v("产品名称")]),n("th",[t._v("数量")]),n("th",[t._v("单件重")]),n("th",[t._v("金料重")]),n("th",[t._v("客户工费")]),n("th",[t._v("件工费")]),n("th",[t._v("附加费")]),n("th",[t._v("规格")]),n("th",[t._v("备注")])]),t._l(t.printDtl,(function(e,a){return n("tr",{key:a,attrs:{align:"center"}},[n("td",[t._v(t._s(e.seq))]),e.style?n("td",[t._v(t._s(e.style.style_name))]):n("td",[t._v("-")]),e.qty?n("td",[t._v(t._s(e.qty))]):n("td",[t._v("-")]),e.wgt?n("td",[t._v(t._s(e.wgt))]):n("td",[t._v("-")]),e.gold_wgt?n("td",[t._v(t._s(e.gold_wgt))]):n("td",[t._v("-")]),e.wgt_prc?n("td",[t._v(t._s(e.wgt_prc))]):n("td",[t._v("-")]),e.qty_prc?n("td",[t._v(t._s(e.qty_prc))]):n("td",[t._v("-")]),e.add_prc?n("td",[t._v(t._s(e.add_prc))]):n("td",[t._v("-")]),e.spec?n("td",[t._v(t._s(e.spec))]):n("td",[t._v("-")]),e.remark?n("td",[t._v(t._s(e.remark))]):n("td",[t._v("-")])])})),n("tr",{attrs:{align:"center"}},[n("td",[t._v("合计")]),n("td",[t._v("-")]),n("td",[t._v(t._s(t.dtlTotal.qty))]),n("td",[t._v(t._s(t.dtlTotal.wgt))]),n("td",[t._v(t._s(t.dtlTotal.gold_wgt))]),n("td",[t._v("-")]),n("td",[t._v("-")]),n("td",[t._v("-")]),n("td",[t._v("-")]),n("td",[t._v("-")])])],2),n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","border-top":"2px solid #000"}},[n("div",{staticClass:"sumBotn",staticStyle:{width:"60%"}},[n("p",[n("span",[t._v("制单人：")]),t.checkHas?n("span",[t._v(t._s(t.checkHas.staffr_name))]):t._e()]),n("p",[n("span",[t._v("复核：")]),n("span")]),n("p",[n("span",[t._v("签收：")]),n("span")])]),n("big-name")],1)]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.toImg}},[t._v("转图片下载")]),n("el-button",{attrs:{type:"primary"},on:{click:t.printContext}},[t._v("直接打印")]),n("el-button",{on:{click:function(e){t.printData.isshow=!1}}},[t._v("取 消")])],1)]),n("el-dialog",{staticStyle:{padding:"0 20px"},attrs:{title:"批量审核",visible:t.checkData.isshow,width:"60%"},on:{"update:visible":function(e){return t.$set(t.checkData,"isshow",e)}}},[n("el-form",{attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"开始日期"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.checkData.data.begin_date,callback:function(e){t.$set(t.checkData.data,"begin_date",e)},expression:"checkData.data.begin_date"}})],1),n("el-form-item",{attrs:{label:"结束日期"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.checkData.data.end_date,callback:function(e){t.$set(t.checkData.data,"end_date",e)},expression:"checkData.data.end_date"}})],1),n("div",{staticStyle:{"text-align":"center"}},[n("el-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"success"},on:{click:function(e){return t.saveCheck("1")}}},[t._v("审 核")]),n("el-button",{attrs:{type:"warning"},on:{click:function(e){return t.saveCheck("0")}}},[t._v("反审核")])],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.checkData.isshow=!1}}},[t._v("取 消")])],1)],1)],1)},l=[],i=(a("7514"),a("34ef"),a("28a5"),a("ac6a"),a("456d"),a("96cf"),a("1da1")),r=a("fd03"),o=(a("add5"),a("c0e9")),s=a.n(o),c={name:"ordermanage",data:function(){return{rules:{cust_no:[{required:!0,message:"请选择客户",trigger:"change"}],gold_no:[{required:!0,message:"请选择金成色",trigger:"change"}],ordertype_no:[{required:!0,message:"请选择订单类型",trigger:"change"}]},bonusData:{field:[],table:[],condition:[],parameter:[]},tableIndex:0,tableNo:0,searchData:[],arr:[],arrs:[],cust_no:"",style_no:"",currency_no:"",order_date:"",tableData:[],activeName:"first",allArr:"",form:{},isedit:!0,isCheck:!1,prev:null,next:null,dialogImageUrl:"",dialogVisible:!1,outData:{isshow:!1,scope:null,index:0,data:{}},excelData:{isshow:!1,scope:null,index:0,data:{}},printData:{isshow:!1,scope:null,index:0,data:{}},checkData:{isshow:!1,scope:null,index:0,data:{}},keyword:"",isAdd:!1,loading:!1,excelValue:"",imgArr:[],pull_cust:[],pull_print:[],pull_ordertype:[],pull_receive:[],pull_gold:[],perData:"",usedCounter:"",nullBtn:!1,pull_style:[],systemSet:"",username:"",printList:{},printDtl:[],receiveD:"",goldD:"",checkHas:"",dtlTotal:"",custP:""}},created:function(){this.getSystem(),this.geData(),this.getStoneData(),this.getPermission()},watch:{},methods:{geData:function(){var t=this,e=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});this.isAdd=!1,Object(r["gd"])({}).then((function(e){if(2e3==e.code){if(t.form=e.data.data,t.next=e.data.next,t.prev=e.data.prev,1==t.form.check&&(t.isCheck=!0),e.data.data.dtl[0]){var a=[];for(var n in e.data.data.dtl[0].style_img)e.data.data.dtl[0].style_img[n]&&a.push(e.data.data.dtl[0].style_img[n]);t.imgArr=a}}else"无数据请先添加"!=e.data.info&&"没有这条数据"!=e.data.info||(t.form={dtl:[]},t.nullBtn=!0),t.$message.error(e.data.info)})),e.close()},getStoneData:function(){var t=this;Object(r["U"])({}).then((function(e){2e3==e.code?(t.allArr=e.data,t.pull_cust=e.data.cust,t.pull_print=e.data.print,t.pull_ordertype=e.data.ordertype,t.pull_gold=e.data.gold,t.pull_receive=e.data.salesman_no):t.$message.error(e.msg)}))},searchIt:function(t){var e=this;Object(r["Vf"])({order_no:t}).then((function(t){2e3==t.code?(e.form=t.data.data,e.next=t.data.next,e.prev=t.data.prev,e.outData.isshow=!1,1==e.form.check?e.isCheck=!0:e.isCheck=!1):e.$message.error(t.data.info)}))},refreshData:function(t){this.isedit=!0,this.isAdd=!1,null==t?this.geData():this.searchIt(t)},handelEdit:function(){1==this.isedit&&(0==this.form.check?this.isedit=!1:1==this.form.check&&(this.isCheck=!0))},saveIt:function(){var t=this,e=this.form,a=this.$refs.xTable1.getTableData().tableData;e["dtl"]=a,e["check"]=1==this.form.check?"1":"0",e["urgent"]=1==this.form.urgent?"1":"0",this.$load.show(),1==this.isAdd?Object(r["Pg"])(e).then((function(e){2e3==e.code?(t.$message.success("添加成功"),t.form=e.data.data,t.next=e.data.next,t.prev=e.data.prev,t.isAdd=!1,t.isedit=!0):t.$message.error(e.data.info),t.$load.close()})):Object(r["Ed"])(e).then((function(e){2e3==e.code?(t.$message.success("修改成功"),t.form=e.data.data,t.next=e.data.next,t.prev=e.data.prev,t.isedit=!0):t.$message.error(e.data.info),t.$load.close()}))},add:function(){0==this.isAdd?(this.isedit=!1,this.form={order_date:""},this.imgArr=[],this.form.check=!1,this.isAdd=!0,this.isCheck=!1,this.nullBtn=!1,this.form.order_date=this.$getTime()):this.$message.error("请先保存再添加下一个")},delOrder:function(){var t=this;this.$confirm("确定要删除该订单单吗？","提示",{type:"warning"}).then((function(){Object(r["Vb"])({order_no:t.form.order_no}).then((function(e){2e3==e.code?(t.$message({message:"删除成功",type:"success"}),null==e.data.data?(t.form={},t.nullBtn=!0):(t.form=e.data.data,1==t.form.check?t.isCheck=!0:t.isCheck=!1),t.next=e.data.next,t.prev=e.data.prev):t.$message.error(e.data.info)}))})).catch((function(){}))},rowChange:function(t){t.row.seq=t.seq},isEdit:function(t){var e=this;Object(r["sh"])({order_no:this.form.order_no,check:1==this.form.check?"1":"0"}).then((function(t){2e3==t.code?(e.$message.success(t.msg),1==e.form.check?e.isCheck=!0:(e.isedit=!0,e.isCheck=!1)):(e.$message.error(t.data.info),1==e.form.check?e.form.check=0:e.form.check=1)}))},firstPage:function(){var t=this,e=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});Object(r["nc"])({}).then((function(e){2e3==e.code?(t.form=e.data.data,t.next=e.data.next,t.prev=e.data.prev,1==t.form.check?t.isCheck=!0:t.isCheck=!1):t.$message.error(e.data.info)})),e.close()},lastPage:function(){var t=this,e=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});Object(r["gd"])({}).then((function(e){2e3==e.code?(t.form=e.data.data,t.next=e.data.next,t.prev=e.data.prev,1==t.form.check?t.isCheck=!0:t.isCheck=!1):t.$message.error(e.data.info)})),e.close()},nextPage:function(){var t=this,e=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});Object(r["be"])({order_no:this.form.order_no}).then((function(e){2e3==e.code?(t.form=e.data.data,t.next=e.data.next,t.prev=e.data.prev,1==t.form.check?t.isCheck=!0:t.isCheck=!1):t.$message.error(e.data.info)})),e.close()},prevPage:function(){var t=this,e=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});Object(r["hf"])({order_no:this.form.order_no}).then((function(e){2e3==e.code?(t.form=e.data.data,t.next=e.data.next,t.prev=e.data.prev,1==t.form.check?t.isCheck=!0:t.isCheck=!1):t.$message.error(e.data.info)})),e.close()},insertEvent:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,n,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={style_no:""},t.next=3,this.$refs.xTable1.insertAt(a,e);case 3:return n=t.sent,l=n.row,t.next=7,this.$refs.xTable1.setActiveCell(l,"style_no");case 7:this.$refs.stylefocus.focus();case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),removeEvent:function(){var t=this,e=this.$refs.xTable1.getCheckboxRecords();0==e.length?this.$message.error("请选择你要删除的"):this.$XModal.confirm("您确定要删除该数据?").then((function(e){"confirm"===e&&t.$refs.xTable1.removeCheckboxRow()}))},enterFilterEvent:function(t,e){t.$panel,t.row;13===e.keyCode&&this.insertEvent(-1)},handlePictureCardPreview:function(t){this.dialogImageUrl=t,this.dialogVisible=!0},showOut:function(){var t=this;this.excelData.isshow=!0,Object(r["wc"])({}).then((function(e){2e3==e.code?t.username=e.data.login_staff:t.$message.error(e.msg)}))},outExcel:function(){var t=this,e=this.username;this.excelData.isshow=!1,this.$axios.get(this.$baseURL+"subscribe_export",{params:{token:sessionStorage.getItem("userToken"),login_staff:e,order_no:this.keyword,type:this.excelValue,cust_no:this.cust_no,style_no:this.style_no,currency_no:this.currency_no,order_date:this.order_date},responseType:"arraybuffer"}).then((function(e){var a=new Blob([e.data],{type:"application/x-xls"}),n=document.createElement("a");n.href=window.URL.createObjectURL(a),n.download=t.excelValue+".xlsx",n.click()}))},outTem:function(){var t=this;this.$axios.get(this.$baseURL+"subscribe_template_export",{params:{token:sessionStorage.getItem("userToken"),type:this.excelValue},responseType:"arraybuffer"}).then((function(e){var a=new Blob([e.data],{type:"application/x-xls"}),n=document.createElement("a");n.href=window.URL.createObjectURL(a),n.download=t.excelValue+"模板.xlsx",n.click()}))},activeRowMethod:function(){return 0==this.isedit||(this.$message.error("该状态下不可编辑"),!1)},choseIt:function(t){var e=[];for(var a in t.row.style_img)t.row.style_img[a]&&e.push(t.row.style_img[a]),this.imgArr=e},changeData:function(t){var e=this,a=this.allArr.style.filter((function(e){return e.style_no==t.style_no})),n=this.allArr.style.filter((function(e){return e.style_no==t.style_no}));t.style_no&&(this.imgArr=n[0].img,t.style_name=a[0].style_name),Object(r["ze"])({cust_no:this.form.cust_no,style_no:t.style_no}).then((function(a){2e3==a.code?t.wgt_prc=a.data.salewgt_prc:e.$message.error(a.data.info)}))},test:function(t){return Object.keys(t).filter((function(t){return"_XID"!=t&&"seq"!=t&&"diff_wgt"!=t&&"amt"!=t})).every((function(e){return!t[e]}))},selectName:function(t){var e=this.allArr.style.filter((function(e){return e.style_no==t.row.style_name})),a=this.allArr.style.filter((function(e){return e.style_no==t.row.style_name}));t.row.style_name&&(t.row.style_no=e[0].style_no,this.imgArr=a[0].img)},toImg:function(){var t=this;s()(this.$refs.print,{backgroundColor:"white",useCORS:!0,windowHeight:document.body.scrollHeight}).then((function(e){var a=e.toDataURL();t.img=a,t.download()}))},download:function(){var t=this.img;this.downloadFile("首饰加工订单.png",t)},downloadFile:function(t,e){var a=document.createElement("a"),n=this.base64ToBlob(e),l=document.createEvent("HTMLEvents");l.initEvent("click",!0,!0),a.download=t,a.href=URL.createObjectURL(n),a.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))},base64ToBlob:function(t){for(var e=t.split(";base64,"),a=e[0].split(":")[1],n=window.atob(e[1]),l=n.length,i=new Uint8Array(l),r=0;r<l;++r)i[r]=n.charCodeAt(r);return new Blob([i],{type:a})},printContext:function(){this.$print(this.$refs.print)},printOut:function(){var t=this;this.printData.isshow=!0,Object(r["xf"])({order_no:this.form.order_no}).then((function(e){2e3==e.code?(t.printList=e.data,t.goldD=e.data.gold,t.receiveD=e.data.receive,t.printDtl=e.data.dtl,t.checkHas=e.data.build_has,t.dtlTotal=e.data.dtl_total,t.custP=e.data.cust,console.log(e.data)):t.$message.error(e.data.info)}))},countAmount:function(t){var e=t.qty*t.wgt;return t.gold_wgt=e,e||0},countWgt:function(t){var e=t.wgt-t.gross_wgt;return t.diff_wgt=e,e||0},countAllAmount:function(t){var e=this;return this.$utils.sum(t.map((function(t){return e.countAmount(t)})))},countAllMoney:function(t){var e=this;return this.$utils.sum(t.map((function(t){return e.countWgt(t)})))},footerMethod:function(t){var e=this,a=t.columns,n=t.data;return[a.map((function(t,a){return 1===a?"合计":0===a?void 0:"".concat(e.$utils.sum(n,t.property)," ")}))]},getPermission:function(){var t=this;Object(r["xb"])({id:"77"}).then((function(e){2e3==e.code?t.perData=e.data:t.$message.error(e.msg)}))},showInput:function(){null==this.bonusData.field&&(this.bonusData.field=[]),null==this.bonusData.table&&(this.bonusData.table=[]),null==this.bonusData.condition&&(this.bonusData.condition=[]),null==this.bonusData.parameter&&(this.bonusData.parameter=[]);var t="";this.bonusData.field.push(t),this.bonusData.table.push(t),this.bonusData.condition.push(t),this.bonusData.parameter.push(t)},selectOne:function(t){for(var e=0;e<this.allArr.screen_pull.length;e++)this.allArr.screen_pull[e].table==this.bonusData.field[t]&&(this.tableIndex=e);this.arr[t]=this.tableIndex},selectOne1:function(t){for(var e=0;e<this.allArr.screen_pull[this.arr[t]].field.length;e++)this.allArr.screen_pull[this.arr[t]].field[e].name_no==this.bonusData.table[t]&&(this.tableNo=e);this.arrs[t]=this.tableNo},deleteRow:function(t,e){e.splice(t,1)},saveOk:function(){var t=this;console.log(this.bonusData);for(var e=[],a=0;a<this.bonusData.field.length&&this.bonusData.table.length&&this.bonusData.condition.length&&this.bonusData.parameter.length;a++)e[a]={},e[a].table=this.bonusData.field[a],e[a].field=this.bonusData.table[a],e[a].condition=this.bonusData.condition[a],e[a].parameter=this.bonusData.parameter[a];Object(r["Lh"])({data:e}).then((function(e){2e3==e.code?t.searchData=e.data:t.$message.error(e.data.info)}))},searchAll:function(t){if(this.form.cust_no=t,t){for(var e=this.allArr.cust,a=[],n=0;n<e.length;n++)(e[n].cust_no.toLowerCase().indexOf(t.toLowerCase())>=0||e[n].cust_name.indexOf(t)>=0)&&a.push(e[n]);this.pull_cust=a}else this.pull_cust=this.allArr.cust},searchType:function(t){if(this.form.ordertype_no=t,t){for(var e=this.allArr.ordertype,a=[],n=0;n<e.length;n++)(e[n].kind_no.toLowerCase().indexOf(t.toLowerCase())>=0||e[n].kind_name.indexOf(t)>=0)&&a.push(e[n]);this.pull_ordertype=a}else this.pull_ordertype=this.allArr.ordertype},searchGold:function(t){if(this.form.gold_no=t,t){for(var e=this.allArr.gold,a=[],n=0;n<e.length;n++)(e[n].kind_no.toLowerCase().indexOf(t.toLowerCase())>=0||e[n].kind_name.indexOf(t)>=0)&&a.push(e[n]);this.pull_gold=a}else this.pull_gold=this.allArr.gold},searchReceive:function(t){if(this.form.receive_no=t,t){for(var e=this.allArr.salesman_no,a=[],n=0;n<e.length;n++)(e[n].login_staff.toLowerCase().indexOf(t.toLowerCase())>=0||e[n].staffr_name.indexOf(t)>=0)&&a.push(e[n]);this.pull_receive=a}else this.pull_receive=this.allArr.salesman_no},searchPrint:function(t){if(this.form.print_no=t,t){for(var e=this.allArr.print,a=[],n=0;n<e.length;n++)(e[n].kind_no.toLowerCase().indexOf(t.toLowerCase())>=0||e[n].kind_name.indexOf(t)>=0)&&a.push(e[n]);this.pull_print=a}else this.pull_print=this.allArr.print_no},refreshs:function(){this.$forceUpdate()},getSystem:function(){var t=this;Object(r["gg"])({}).then((function(e){2e3==e.code?t.systemSet=e.data:t.$message.error(e.data.info)}))},selectCust:function(){},getSelectLabel:function(t,e){if(e){var a=e.find((function(e){return e.kind_no===t}));return a?a.kind_name:null}},getSelectLabel2:function(t,e){if(e){var a=e.find((function(e){return e.style_no===t}));return a?a.style_name:null}},isReturn:function(t){this.form.urgent=1==t?1:0},outSix:function(t){var e=this;console.log(t),Object(r["Ge"])({style_no:t.style_no}).then((function(a){2e3==a.code?(t.gold_wgt=a.data.gold_wgt,t.kind_no=a.data.kind_no,t.qty=a.data.qty,t.type_no=a.data.type_no,t.unit_no=a.data.unit_no,t.wgt=a.data.wgt):e.$message.error(a.data.info)}))},getRefreshPull:function(){this.pull_cust=this.allArr.cust,this.pull_print=this.allArr.print,this.pull_ordertype=this.allArr.ordertype,this.pull_gold=this.allArr.gold,this.pull_receive=this.allArr.salesman_no},saveCheck:function(t){var e=this,a=this.checkData.data;Object(r["ye"])({begin_date:a.begin_date,end_date:a.end_date,check:t}).then((function(t){2e3==t.code?(e.$message.success(t.msg),e.searchIt(e.form.order_no),e.checkData.isshow=!1):e.$message.error(t.data.info)}))}}},d=c,u=(a("da9f"),a("4f8c"),a("2877")),f=Object(u["a"])(d,n,l,!1,null,"72144daf",null);e["default"]=f.exports},b887:function(t,e,a){t.exports=a.p+"img/last1.b6402fd3.png"},da9f:function(t,e,a){"use strict";var n=a("71e6"),l=a.n(n);l.a},e484:function(t,e,a){t.exports=a.p+"img/next1.ab2ca5a8.png"}}]);
//# sourceMappingURL=chunk-6a301c60.149a5084.js.map
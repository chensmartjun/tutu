(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60acf1f0"],{"172c":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{background:"#fff",padding:"20px"}},[1==t.perData.allow_print?a("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"info"},on:{click:t.outExcel}},[t._v("导出Excel")]):t._e(),a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"select_warpper"},[a("el-form",{attrs:{inline:!0,model:t.form}},[a("el-form-item",{staticStyle:{"margin-left":"0px",padding:"0px"},attrs:{label:"产品："}},[a("el-select",{staticStyle:{width:"80%"},attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:t.form.style_no,callback:function(e){t.$set(t.form,"style_no",e)},expression:"form.style_no"}},t._l(t.pullList.style_nos,(function(t,e){return a("el-option",{key:e,attrs:{label:t.kind_no+"-"+t.kind_name,value:t.kind_no}})})),1)],1),a("el-form-item",{staticStyle:{"margin-left":"0px",padding:"0px"},attrs:{label:"金成色："}},[a("el-select",{staticStyle:{width:"80%"},attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:t.form.gold_no,callback:function(e){t.$set(t.form,"gold_no",e)},expression:"form.gold_no"}},t._l(t.pullList.gold_nos,(function(t,e){return a("el-option",{key:e,attrs:{label:t.kind_no+"-"+t.kind_name,value:t.kind_no}})})),1)],1),a("el-form-item",{staticStyle:{"margin-left":"0px",padding:"0px"},attrs:{label:"品类："}},[a("el-select",{staticStyle:{width:"80%"},attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:t.form.type_no,callback:function(e){t.$set(t.form,"type_no",e)},expression:"form.type_no"}},t._l(t.pullList.type_nos,(function(t,e){return a("el-option",{key:e,attrs:{label:t.kind_no+"-"+t.kind_name,value:t.kind_no}})})),1)],1),a("el-form-item",{staticStyle:{"margin-left":"0px",padding:"0px"},attrs:{label:"品目："}},[a("el-select",{staticStyle:{width:"80%"},attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:t.form.kind_no,callback:function(e){t.$set(t.form,"kind_no",e)},expression:"form.kind_no"}},t._l(t.pullList.kind_nos,(function(t,e){return a("el-option",{key:e,attrs:{label:t.kind_no+"-"+t.kind_name,value:t.kind_no}})})),1)],1),a("el-form-item",{staticStyle:{"margin-left":"0px",padding:"0px"},attrs:{label:""}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入规格"},model:{value:t.form.specs,callback:function(e){t.$set(t.form,"specs",e)},expression:"form.specs"}})],1)],1)],1),a("div",{staticStyle:{"margin-left":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("筛选")])],1)]),a("div",{staticClass:"totaltable",staticStyle:{"margin-top":"0px",clear:"both"}},[a("el-table",{staticStyle:{width:"100%","font-size":"14px"},attrs:{data:t.dtlArr,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center"}}),a("el-table-column",{attrs:{prop:"barcode_no",label:"条码号",width:"150"}}),a("el-table-column",{attrs:{prop:"counter_name",label:"柜台",width:"150"}}),a("el-table-column",{attrs:{prop:"style_name",label:"产品"}}),a("el-table-column",{attrs:{prop:"gold_name",label:"金成色"}}),a("el-table-column",{attrs:{prop:"type_name",label:"品类"}}),a("el-table-column",{attrs:{prop:"kind_name",label:"品目"}}),a("el-table-column",{attrs:{prop:"wgt",label:"重量"}}),a("el-table-column",{attrs:{prop:"wgt_prc",label:"重单价"}}),a("el-table-column",{attrs:{prop:"qty",label:"数量"}}),a("el-table-column",{attrs:{prop:"qty_prc",label:"数单价"}}),a("el-table-column",{attrs:{prop:"specs",label:"规格"}}),a("el-table-column",{attrs:{prop:"trans_wgt",label:"折后重"}}),a("el-table-column",{attrs:{prop:"amt",label:"金额"}})],1)],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":t.form.page,"page-size":t.form.page_size,"page-sizes":[10,50,100],total:t.pageTotal},on:{"current-change":t.handlePageChange,"size-change":t.pageSizeChange}})],1)],1)},n=[],o=(a("34ef"),a("28a5"),a("fd03")),i=(a("add5"),a("c0e9")),s=a.n(i),r={name:"inOut",data:function(){return{dtlArr:[],arr:[],pageTotal:0,img:"",perData:"",systemSet:"",username:"",pullList:{},form:{page:1,page_size:10}}},watch:{},created:function(){this.selectTable(),this.getPermission(),this.getSystem(),this.getPull(),console.log(this.dtlArr.length)},methods:{getPull:function(){var t=this;Object(o["kj"])().then((function(e){console.log(e),t.pullList=e.data}))},search:function(){this.form.page=1,this.selectTable()},selectTable:function(){var t=this;this.$load.show(),Object(o["jj"])(this.form).then((function(e){console.log(e),t.$load.close(),2e3==e.code?(console.log(e.data),t.dtlArr=e.data.data,t.pageTotal=e.data.page_total):t.$message.error(e.data.info)}))},toImg:function(){var t=this;setTimeout((function(){s()(t.$refs.print,{backgroundColor:"white",useCORS:!0,windowHeight:document.body.scrollHeight}).then((function(e){var a=e.toDataURL();t.img=a,t.download()}))}))},printContext:function(){this.$print(this.$refs.print)},download:function(){var t=this.img;this.downloadFile("成品履历.png",t)},downloadFile:function(t,e){var a=document.createElement("a"),l=this.base64ToBlob(e),n=document.createEvent("HTMLEvents");n.initEvent("click",!0,!0),a.download=t,a.href=URL.createObjectURL(l),a.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))},base64ToBlob:function(t){for(var e=t.split(";base64,"),a=e[0].split(":")[1],l=window.atob(e[1]),n=l.length,o=new Uint8Array(n),i=0;i<n;++i)o[i]=l.charCodeAt(i);return new Blob([o],{type:a})},handlePageChange:function(t){this.form.page=t,this.selectTable()},pageSizeChange:function(t){this.form.page=1,this.form.page_size=t,this.selectTable()},getPermission:function(){var t=this;Object(o["xb"])({id:"107"}).then((function(e){2e3==e.code?(t.perData=e.data,t.username=e.data.login_staff):t.$message.error(e.msg)}))},getSystem:function(){var t=this;Object(o["gg"])({}).then((function(e){2e3==e.code?t.systemSet=e.data:t.$message.error(e.data.info)}))},outExcel:function(){var t=this.form.style_no,e=this.form.gold_no,a=this.form.type_no,l=this.form.kind_no,n=this.form.specs,o=this.form.page,i=this.form.page_size;window.location="".concat(this.$baseURL,"chengpstock_export?\n                style_no=").concat(t||"","\n                &gold_no=").concat(e||"","\n                &type_no=").concat(a||"","\n                &kind_no=").concat(l||"","\n                &specs=").concat(n||"","\n                &page=").concat(o||"","\n                &page_size=").concat(i||"")}}},c=r,p=(a("3dfa"),a("2877")),d=Object(p["a"])(c,l,n,!1,null,"fa4ed008",null);e["default"]=d.exports},"30af":function(t,e,a){},"3dfa":function(t,e,a){"use strict";var l=a("30af"),n=a.n(l);n.a}}]);
//# sourceMappingURL=chunk-60acf1f0.927a52d1.js.map
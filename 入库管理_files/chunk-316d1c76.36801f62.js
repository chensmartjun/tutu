(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-316d1c76"],{"2f19":function(t,e,a){},"4f94":function(t,e,a){},9350:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"orderorder"},[n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("img",{class:null==t.prev?"gray":"",staticStyle:{width:"30px",transform:"rotate(180deg)"},attrs:{src:a("b887"),alt:""},on:{click:function(e){1!=t.isAdd&&1!=!t.isedit&&t.firstPage()}}}),n("img",{class:null==t.prev?"gray":"",staticStyle:{width:"30px",transform:"rotate(180deg)",margin:"0 15px"},attrs:{src:a("e484"),alt:""},on:{click:function(e){1!=t.isAdd&&1!=!t.isedit&&t.prevPage()}}}),n("img",{class:null==t.next?"gray":"",staticStyle:{width:"30px","margin-right":"15px"},attrs:{src:a("e484"),alt:""},on:{click:function(e){1!=t.isAdd&&1!=!t.isedit&&t.nextPage()}}}),n("img",{class:null==t.next?"gray":"",staticStyle:{width:"30px"},attrs:{src:a("b887"),alt:""},on:{click:function(e){1!=t.isAdd&&1!=!t.isedit&&t.lastPage()}}}),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning",icon:"el-icon-refresh",size:"mini"},on:{click:function(e){t.outData.isshow=!0}}},[t._v("筛选")]),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",icon:"el-icon-download",size:"mini"},on:{click:t.showOut}},[t._v("导出")])],1),n("div",{staticStyle:{float:"right"}},[n("el-dialog",{staticStyle:{width:"35%"},attrs:{visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("div",{ref:"print",staticClass:"printBox",staticStyle:{"page-break-after":"always",padding:"10px"},attrs:{id:"print"}},[t.systemSet.company?n("p",{staticClass:"company"},[t._v(t._s(t.systemSet.company))]):t._e(),n("div",{staticStyle:{margin:"0px 0 0px","padding-bottom":"5px"}},[n("div",[n("div",{staticStyle:{"font-size":"12px"}},[n("label",{staticStyle:{"font-size":"12px"}},[t._v("编号:")]),t._v(t._s(t.LabelList.wgt?t.LabelList.wgt:"")+"\n                            ")])]),n("div")])]),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.dialogVisibleModify()}}},[t._v("确 定")])],1)]),1==t.perData.allow_add?n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus",disabled:t.isAdd||!t.isedit},on:{click:t.add}},[t._v("新建")]):t._e(),1==t.perData.allow_edit?n("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-edit",disabled:t.isAdd||!t.isedit||t.isCheck||t.nullBtn},on:{click:t.handelEdit}},[t._v("修改")]):t._e(),1==t.perData.allow_dele?n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",disabled:t.isAdd||!t.isedit||t.isCheck||t.nullBtn},on:{click:t.delOrder}},[t._v("删除")]):t._e(),1==t.perData.allow_edit||1==t.perData.allow_add?n("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-document-checked",disabled:t.nullBtn||t.isedit},on:{click:t.saveIt}},[t._v("保存")]):t._e(),n("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-refresh-left",disabled:t.isCheck||t.nullBtn||t.isedit},on:{click:function(e){return t.refreshData(t.form.subscribe_no)}}},[t._v("撤回")]),1==t.perData.allow_print?n("el-button",{attrs:{type:"primary",size:"mini",disabled:t.isAdd||!t.isedit||t.nullBtn,icon:"el-icon-printer"},on:{click:t.printOut}},[t._v("打印")]):t._e(),1==t.perData.allow_check?n("div",{staticClass:"checkboxProOreder"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.check,expression:"form.check"}],attrs:{type:"checkbox",disabled:t.isAdd||!t.isedit,name:"审核"},domProps:{checked:1==t.form.check,checked:Array.isArray(t.form.check)?t._i(t.form.check,null)>-1:t.form.check},on:{change:[function(e){var a=t.form.check,n=e.target,s=!!n.checked;if(Array.isArray(a)){var i=null,l=t._i(a,i);n.checked?l<0&&t.$set(t.form,"check",a.concat([i])):l>-1&&t.$set(t.form,"check",a.slice(0,l).concat(a.slice(l+1)))}else t.$set(t.form,"check",s)},function(e){return t.isEdit(t.form.check)}]}}),n("span",{staticStyle:{"margin-left":"10px","margin-top":"10px","font-weight":"bold",color:"red"}},[t._v("审核")])]):t._e()],1)]),n("div",{staticStyle:{"text-align":"right","margin-top":"5px"}},[n("el-button",{attrs:{type:"warning",disabled:t.isAdd||!t.isedit,size:"mini"},on:{click:function(e){t.checkData.isshow=!0}}},[t._v("批量审核")])],1),n("el-form",{ref:"form",staticClass:"topForm",attrs:{model:t.form,"label-width":"100px"}},[n("el-row",{staticClass:"modify",attrs:{gutter:5}},[n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"创建人："}},[n("el-input",{attrs:{disabled:""},model:{value:t.form.build_name,callback:function(e){t.$set(t.form,"build_name",e)},expression:"form.build_name"}})],1)],1),n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"修改人："}},[n("el-input",{attrs:{disabled:""},model:{value:t.form.modify_name,callback:function(e){t.$set(t.form,"modify_name",e)},expression:"form.modify_name"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"创建时间："}},[n("el-input",{attrs:{disabled:""},model:{value:t.form.build_date,callback:function(e){t.$set(t.form,"build_date",e)},expression:"form.build_date"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"修改时间："}},[n("el-input",{attrs:{disabled:""},model:{value:t.form.modify_date,callback:function(e){t.$set(t.form,"modify_date",e)},expression:"form.modify_date"}})],1)],1),n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"审核人："}},[n("el-input",{attrs:{disabled:""},model:{value:t.form.check_name,callback:function(e){t.$set(t.form,"check_name",e)},expression:"form.check_name"}})],1)],1)],1),n("el-container",{staticStyle:{background:"#fff","border-radius":"15px","padding-top":"20px","padding-right":"20px","margin-bottom":"10px"}},[n("el-main",{staticStyle:{padding:"0 20px 0 0"}},[n("el-row",{attrs:{gutter:5}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"订购单号"}},[n("el-input",{attrs:{disabled:""},model:{value:t.form.subscribe_no,callback:function(e){t.$set(t.form,"subscribe_no",e)},expression:"form.subscribe_no"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"订购日期"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",disabled:t.isedit,"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:t.form.subscribe_date,callback:function(e){t.$set(t.form,"subscribe_date",e)},expression:"form.subscribe_date"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"客户名称"}},[n("el-select",{attrs:{clearable:"","default-first-option":"",filterable:"",placeholder:"请选择",disabled:t.isedit},on:{"visible-change":function(e){return t.getRefreshPull()},change:function(e){return t.selectCust()}},model:{value:t.form.cust_no,callback:function(e){t.$set(t.form,"cust_no",e)},expression:"form.cust_no"}},t._l(t.pull_cust,(function(t,e){return n("el-option",{key:e,attrs:{label:t.cust_no+" - "+t.cust_name,value:t.cust_no.toString()}})})),1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"业务员"}},[n("label",{attrs:{slot:"label"},slot:"label"},[t._v("业  务  员")]),n("el-select",{attrs:{clearable:"","default-first-option":"",filterable:"",placeholder:"请选择",disabled:t.isedit},on:{change:function(e){return t.refreshs()},"visible-change":function(e){return t.getRefreshPull()}},model:{value:t.form.salesman_no,callback:function(e){t.$set(t.form,"salesman_no",e)},expression:"form.salesman_no"}},t._l(t.pull_sale,(function(t,e){return n("el-option",{key:e,attrs:{label:t.login_staff+" - "+t.staffr_name,value:t.login_staff.toString()}})})),1)],1)],1)],1),n("el-row",{attrs:{gutter:5}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"货币编号"}},[n("el-select",{attrs:{clearable:"","default-first-option":"",filterable:"",placeholder:"请选择",disabled:t.isedit},on:{change:function(e){return t.refreshs()},"visible-change":function(e){return t.getRefreshPull()}},model:{value:t.form.currency_no,callback:function(e){t.$set(t.form,"currency_no",e)},expression:"form.currency_no"}},t._l(t.pull_curry,(function(t,e){return n("el-option",{key:e,attrs:{label:t.kind_no+" - "+t.kind_name,value:t.kind_no.toString()}})})),1)],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"调出柜台编号"}},[n("el-select",{attrs:{clearable:"","default-first-option":"",filterable:"",placeholder:"请选择",disabled:t.isedit},on:{"visible-change":function(e){return t.getRefreshPull()},change:function(e){return t.refreshs()}},model:{value:t.form.out_counter,callback:function(e){t.$set(t.form,"out_counter",e)},expression:"form.out_counter"}},t._l(t.pull_counter,(function(t,e){return n("el-option",{key:e,attrs:{label:t.kind_no+" - "+t.kind_name,value:t.kind_no.toString()}})})),1)],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"调入柜台编号"}},[n("el-select",{attrs:{clearable:"","default-first-option":"",filterable:"",placeholder:"请选择",disabled:t.isedit},on:{"visible-change":function(e){return t.getRefreshPull()},change:function(e){return t.refreshs()}},model:{value:t.form.in_counter,callback:function(e){t.$set(t.form,"in_counter",e)},expression:"form.in_counter"}},t._l(t.pull_counter2,(function(t,e){return n("el-option",{key:e,attrs:{label:t.kind_no+" - "+t.kind_name,value:t.kind_no.toString()}})})),1)],1)],1)],1),n("el-row",{attrs:{gutter:5}},[n("el-col",[n("el-form-item",{attrs:{label:"备注"}},[n("label",{attrs:{slot:"label"},slot:"label"},[t._v("备       注")]),n("el-input",{attrs:{type:"textarea",rows:2,disabled:t.isedit},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1)],1)],1),n("el-aside",{staticClass:"img",attrs:{width:"150px"}},[n("el-carousel",{attrs:{"indicator-position":"none",autoplay:!1,height:"150px"}},t._l(t.imgArr,(function(e){return n("el-carousel-item",{key:e},[n("el-image",{staticStyle:{width:"150px",height:"150px"},attrs:{src:e,alt:""},on:{click:function(a){return t.handlePictureCardPreview(e)}}})],1)})),1)],1)],1)],1),n("div",{staticStyle:{"margin-bottom":"10px","text-align":"right"}},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus",disabled:t.isedit},on:{click:function(e){return t.insertEvent(-1)}}},[t._v("新增数据")]),n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",disabled:t.isedit},on:{click:function(e){return t.removeEvent()}}},[t._v("删除")])],1),n("div",{staticStyle:{"text-align":"center",background:"rgb(128, 0, 0)",color:"#fff","font-size":"12px",padding:"6px 0"}},[t._v("明细")]),n("vxe-table",{ref:"xTable1",attrs:{border:"",stripe:"",resizable:"","keep-source":"",align:"center",height:"400","show-overflow":"","highlight-hover-row":"",loading:t.loading,"show-footer-overflow":"","footer-method":t.footerMethod,"show-footer":"","mouse-config":{selected:!0,area:!0},"keyboard-config":{isArrow:!0,isDel:!0,isEnter:!0,isTab:!0,isEdit:!0},"row-class-name":t.rowChange,data:t.form.dtl,"edit-config":{trigger:"click",mode:"cell",icon:"fa fa",activeMethod:t.activeRowMethod}},on:{"cell-click":t.choseIt}},[n("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),n("vxe-table-column",{attrs:{type:"seq",field:"seq",width:"50",title:"序号"}}),1==t.is_onlyone?n("vxe-table-column",{attrs:{field:"barcode_no",width:"150",title:"条码号","edit-render":{name:"$input",events:{keydown:t.enterFilterEvents}}}}):t._e(),n("vxe-table-column",{attrs:{title:"产品编号",width:"150",field:"style_no","edit-render":{}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[n("el-select",{ref:"stylefocus",attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},on:{change:function(e){return t.changeData(a)}},model:{value:a.style_no,callback:function(e){t.$set(a,"style_no",e)},expression:"row.style_no"}},t._l(t.allArr.style,(function(t){return n("el-option",{key:t.style_no,attrs:{label:t.style_no+" - "+t.style_name,value:t.style_no}})})),1)]}}])}),n("vxe-table-column",{attrs:{field:"style_name",title:"产品名称",width:"120"}}),n("vxe-table-column",{attrs:{field:"specs",width:"150",title:"规格","edit-render":{name:"input",attrs:{disabled:t.isedit}}}}),n("vxe-table-column",{attrs:{title:"工费类型",width:"150",field:"wage_type","edit-render":{}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},on:{change:function(e){return t.changeDatas(a)}},model:{value:a.wage_type,callback:function(e){t.$set(a,"wage_type",e)},expression:"row.wage_type"}},t._l(t.wage_type_pull,(function(t){return n("el-option",{key:t.kind_no,attrs:{label:t.kind_name,value:t.kind_no}})})),1)]}}])}),n("vxe-table-column",{attrs:{field:"qty",title:"数量",width:"120","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[n("vxe-input",{attrs:{type:"number",disabled:""!=a.barcode_no},on:{blur:function(e){return t.$vaildator.qty(a)}},model:{value:a.qty,callback:function(e){t.$set(a,"qty",e)},expression:"row.qty"}})]}}])}),n("vxe-table-column",{attrs:{field:"wgt",title:"重量",width:"120","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[n("vxe-input",{attrs:{type:"number"},on:{blur:function(e){return t.$vaildator.wgt(a)}},model:{value:a.wgt,callback:function(e){t.$set(a,"wgt",e)},expression:"row.wgt"}})]}}])}),n("vxe-table-column",{attrs:{field:"gross_wgt",title:"毛重",width:"120","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[n("vxe-input",{attrs:{type:"number"},on:{blur:function(e){return t.$vaildator.gross_wgt(a)}},model:{value:a.gross_wgt,callback:function(e){t.$set(a,"gross_wgt",e)},expression:"row.gross_wgt"}})]}}])}),n("vxe-table-column",{attrs:{title:"差重",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(t.countWgt(a).toFixed(t.systemSet.wgt)))])]}}])}),n("vxe-table-column",{attrs:{field:"add_wage",title:"附加工费",width:"120","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[n("vxe-input",{attrs:{type:"number"},on:{blur:function(e){return t.$vaildator.add_wage(a)}},model:{value:a.add_wage,callback:function(e){t.$set(a,"add_wage",e)},expression:"row.add_wage"}})]}}])}),n("vxe-table-column",{attrs:{field:"qty_prc",title:"数单价",width:"120","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[n("vxe-input",{attrs:{type:"number"},on:{blur:function(e){return t.$vaildator.qty_prc(a)}},model:{value:a.qty_prc,callback:function(e){t.$set(a,"qty_prc",e)},expression:"row.qty_prc"}})]}}])}),n("vxe-table-column",{attrs:{field:"wgt_prc",title:"工费",width:"120","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"}}}}),n("vxe-table-column",{attrs:{field:"amt",title:"金额小计",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(t.countAmount(a).toFixed(t.systemSet.amt)))])]}}])}),n("vxe-table-column",{attrs:{field:"remark",align:"left",title:"备注","edit-render":{name:"input",attrs:{disabled:t.isedit},events:{keyup:t.enterFilterEvent}}}})],1),n("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),n("el-dialog",{staticStyle:{padding:"0 20px"},attrs:{title:"筛选",visible:t.outData.isshow,width:"60%"},on:{"update:visible":function(e){return t.$set(t.outData,"isshow",e)}}},[n("div",{staticClass:"box1"},[n("el-button",{attrs:{type:"success",icon:"el-icon-plus",plain:"",circle:""},on:{click:t.showInput}}),t._l(t.bonusData.field,(function(e,a){return n("div",{key:a,staticStyle:{"margin-top":"20px",display:"flex","flex-wrap":"wrap","align-items":"center"}},[n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},on:{change:function(e){return t.selectOne(a)}},model:{value:t.bonusData.field[a],callback:function(e){t.$set(t.bonusData.field,a,e)},expression:"bonusData.field[index]"}},t._l(t.allArr.screen_pull,(function(t){return n("el-option",{key:t.style_no,attrs:{label:t.table_name,value:t.table}})})),1),n("span",{staticStyle:{display:"inline-block",margin:"0 10px"}},[t._v("-")]),n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},on:{change:function(e){return t.selectOne1(a)}},model:{value:t.bonusData.table[a],callback:function(e){t.$set(t.bonusData.table,a,e)},expression:"bonusData.table[index]"}},t._l(t.allArr.screen_pull[t.arr[a]?t.arr[a]:0].field,(function(t){return n("el-option",{key:t.name_no,attrs:{label:t.name,value:t.name_no}})})),1),n("span",{staticStyle:{display:"inline-block",margin:"0 10px"}},[t._v("-")]),n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},model:{value:t.bonusData.condition[a],callback:function(e){t.$set(t.bonusData.condition,a,e)},expression:"bonusData.condition[index]"}},t._l(t.allArr.screen_condition,(function(t){return n("el-option",{key:t.name_no,attrs:{label:t.name,value:t.name_no}})})),1),n("span",{staticStyle:{display:"inline-block",margin:"0 10px"}},[t._v("-")]),t.allArr.screen_pull[t.arr[a]?t.arr[a]:0].field[t.arrs[a]?t.arrs[a]:0].select?n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},model:{value:t.bonusData.parameter[a],callback:function(e){t.$set(t.bonusData.parameter,a,e)},expression:"bonusData.parameter[index]"}},t._l(t.allArr.screen_pull[t.arr[a]?t.arr[a]:0].field[t.arrs[a]?t.arrs[a]:0].select,(function(t){return n("el-option",{key:t.kind_no,attrs:{label:t.kind_name,value:t.kind_no}})})),1):n("el-input",{staticStyle:{width:"20%"},attrs:{placeholder:"请输入"},model:{value:t.bonusData.parameter[a],callback:function(e){t.$set(t.bonusData.parameter,a,e)},expression:"bonusData.parameter[index]"}}),n("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"danger",icon:"el-icon-minus",plain:"",circle:"",size:"small"},nativeOn:{click:function(e){return e.preventDefault(),t.deleteRow(a,t.bonusData.field)}}})],1)}))],2),t.searchData.length?n("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.searchData}},[n("el-table-column",{attrs:{prop:"subscribe_no",label:"订购单号"}}),n("el-table-column",{attrs:{prop:"cust.cust_name",label:"客户"}}),n("el-table-column",{attrs:{prop:"total.qty",label:"数量"}}),n("el-table-column",{attrs:{prop:"total.wgt",label:"重量"}}),n("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit"},on:{click:function(a){return t.searchIt(e.row.subscribe_no)}}},[t._v("查看详情")])]}}],null,!1,2661226281)})],1):t._e(),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.saveOk}},[t._v("确 定")]),n("el-button",{on:{click:function(e){t.outData.isshow=!1}}},[t._v("取 消")])],1)],1),n("el-dialog",{staticStyle:{padding:"0 20px"},attrs:{title:"导出",visible:t.excelData.isshow,width:"60%"},on:{"update:visible":function(e){return t.$set(t.excelData,"isshow",e)}}},[n("div",{staticClass:"pro",staticStyle:{"text-align":"center"}},[n("el-select",{staticStyle:{display:"block",width:"50%",margin:"0 auto"},attrs:{clearable:"","default-first-option":"",placeholder:"请选择"},model:{value:t.excelValue,callback:function(e){t.excelValue=e},expression:"excelValue"}},[n("el-option",{attrs:{label:"订购",value:"订购"}},[t._v("订购")]),n("el-option",{attrs:{label:"订购明细",value:"订购明细"}},[t._v("订购明细")])],1),n("el-input",{staticStyle:{display:"block",width:"50%",margin:"10px auto"},attrs:{placeholder:"请输入订购单号"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),"订购"==t.excelValue?n("el-select",{staticStyle:{display:"block",width:"50%",margin:"0 auto 10px"},attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择客户"},model:{value:t.cust_no,callback:function(e){t.cust_no=e},expression:"cust_no"}},t._l(t.allArr.cust,(function(t,e){return n("el-option",{key:e,attrs:{label:t.cust_name,value:t.cust_no}})})),1):t._e(),"订购"==t.excelValue?n("el-select",{staticStyle:{display:"block",width:"50%",margin:"0 auto 10px"},attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择货币"},model:{value:t.currency_no,callback:function(e){t.currency_no=e},expression:"currency_no"}},t._l(t.allArr.currency,(function(t,e){return n("el-option",{key:e,attrs:{label:t.kind_name,value:t.kind_no}})})),1):t._e(),"订购"==t.excelValue?n("div",{staticStyle:{display:"block",width:"50%",margin:"0 auto 10px"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.subscribe_date,callback:function(e){t.subscribe_date=e},expression:"subscribe_date"}})],1):t._e(),"订购明细"==t.excelValue?n("el-select",{staticStyle:{display:"block",width:"50%",margin:"0 auto 10px"},attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择产品"},model:{value:t.style_no,callback:function(e){t.style_no=e},expression:"style_no"}},t._l(t.allArr.style,(function(t,e){return n("el-option",{key:e,attrs:{label:t.style_name,value:t.style_no}})})),1):t._e(),n("div",{staticStyle:{display:"flex","align-items":"center","margin-top":"30px","justify-content":"center"}},[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",icon:"el-icon-download"},on:{click:t.outExcel}},[t._v("导出")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:t.outTem}},[t._v("模板导出")])],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.excelData.isshow=!1}}},[t._v("取 消")])],1)]),n("el-dialog",{staticStyle:{padding:"0 0 20px"},attrs:{title:"打印",visible:t.printData.isshow,width:"60%"},on:{"update:visible":function(e){return t.$set(t.printData,"isshow",e)}}},[n("div",{ref:"print",staticClass:"printBox",staticStyle:{"page-break-after":"always",padding:"10px"},attrs:{id:"print"}},[t.systemSet.company?n("p",{staticClass:"company"},[t._v(t._s(t.systemSet.company))]):t._e(),n("p",{staticClass:"printTitle"},[t._v("订购单")]),n("div",{staticClass:"printTop",staticStyle:{margin:"5px 0 10px","padding-bottom":"5px"}},[n("div",[n("div",{staticStyle:{"font-size":"12px"}},[n("label",{staticStyle:{"font-size":"12px"}},[t._v("客户简称：")]),t._v(t._s(t.custP.cust_name))]),n("div",{staticStyle:{"font-size":"12px"}},[n("label",{staticStyle:{"font-size":"12px"}},[t._v("备      注：")]),t._v(t._s(t.printList.remark)+"\n                    ")])]),n("div",[n("div",{staticStyle:{"font-size":"12px"}},[n("label",{staticStyle:{"font-size":"12px"}},[t._v("调入柜台：")]),t._v(t._s(t.inC.kind_name))]),n("div",{staticStyle:{"font-size":"12px"}},[n("label",{staticStyle:{"font-size":"12px"}},[t._v("调出柜台：")]),t._v(t._s(t.outC.kind_name))])]),n("div",{staticStyle:{"margin-left":"50px"}},[n("p",{staticStyle:{"font-weight":"bold","font-size":"12px"}},[n("label",{staticStyle:{"font-size":"12px"}},[t._v("单     号：")]),t._v(t._s(t.printList.subscribe_no)+"\n                    ")]),n("p",{staticStyle:{"font-size":"12px"}},[n("label",{staticStyle:{"font-size":"12px"}},[t._v("日     期：")]),t._v(t._s(t.printList.subscribe_date)+"\n                    ")])])]),n("table",{attrs:{border:"1",cellpadding:"0",cellspacing:"0"}},[n("tr",{attrs:{align:"center"}},[n("th",[t._v("序号")]),n("th",[t._v("产品名称")]),n("th",[t._v("数量")]),n("th",[t._v("重量")]),n("th",[t._v("数单价")]),n("th",[t._v("重单价")]),n("th",[t._v("附加工费")]),n("th",[t._v("毛重")]),n("th",[t._v("差重")]),n("th",[t._v("金额")]),n("th",[t._v("备注")])]),t._l(t.printDtl,(function(e,a){return n("tr",{key:a,attrs:{align:"center"}},[n("td",[t._v(t._s(e.seq))]),e.style_name?n("td",[t._v(t._s(e.style_name))]):n("td",[t._v("-")]),e.qty?n("td",[t._v(t._s(e.qty))]):n("td",[t._v("-")]),e.wgt?n("td",[t._v(t._s(e.wgt))]):n("td",[t._v("-")]),e.qty_prc?n("td",[t._v(t._s(e.qty_prc))]):n("td",[t._v("-")]),e.wgt_prc?n("td",[t._v(t._s(e.wgt_prc))]):n("td",[t._v("-")]),e.add_wage?n("td",[t._v(t._s(e.add_wage))]):n("td",[t._v("-")]),e.gross_wgt?n("td",[t._v(t._s(e.gross_wgt))]):n("td",[t._v("-")]),e.diff_wgt?n("td",[t._v(t._s(e.diff_wgt))]):n("td",[t._v("-")]),e.amt?n("td",[t._v(t._s(e.amt))]):n("td",[t._v("-")]),e.remark?n("td",[t._v(t._s(e.remark))]):n("td",[t._v("-")])])})),n("tr",{attrs:{align:"center"}},[n("td",[t._v("合计")]),n("td",[t._v("-")]),n("td",[t._v(t._s(t.dtlTotal.qty))]),n("td",[t._v(t._s(t.dtlTotal.wgt))]),n("td",[t._v("-")]),n("td",[t._v("-")]),n("td",[t._v("-")]),n("td",[t._v("-")]),n("td",[t._v("-")]),n("td",[t._v(t._s(t.dtlTotal.amt))]),n("td",[t._v("-")])])],2),n("div",{staticClass:"oversummoney"},[n("div",{staticClass:"sum1"},[n("span",[t._v("总计 金额大写")]),n("span",[t._v(t._s(t.printList.amt_chinese))])]),n("div",{staticClass:"sum1"},[n("span",[t._v("金额合计 ")]),n("span",[t._v(t._s(t.printList.amt_total))])])]),n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","border-top":"2px solid #000"}},[n("div",{staticClass:"sumBotn",staticStyle:{width:"60%"}},[n("p",[n("span",[t._v("制单人：")]),t.checkHas?n("span",[t._v(t._s(t.checkHas.staffr_name))]):t._e()]),n("p",[n("span",[t._v("复核：")]),n("span")]),n("p",[n("span",[t._v("签收：")]),n("span")])]),n("big-name")],1)]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.toImg}},[t._v("转图片下载")]),n("el-button",{attrs:{type:"primary"},on:{click:t.printContext}},[t._v("直接打印")]),n("el-button",{on:{click:function(e){t.printData.isshow=!1}}},[t._v("取 消")])],1)]),n("el-dialog",{staticStyle:{padding:"0 20px"},attrs:{title:"批量审核",visible:t.checkData.isshow,width:"60%"},on:{"update:visible":function(e){return t.$set(t.checkData,"isshow",e)}}},[n("el-form",{attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"开始日期"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.checkData.data.begin_date,callback:function(e){t.$set(t.checkData.data,"begin_date",e)},expression:"checkData.data.begin_date"}})],1),n("el-form-item",{attrs:{label:"结束日期"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.checkData.data.end_date,callback:function(e){t.$set(t.checkData.data,"end_date",e)},expression:"checkData.data.end_date"}})],1),n("div",{staticStyle:{"text-align":"center"}},[n("el-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"success"},on:{click:function(e){return t.saveCheck("1")}}},[t._v("审 核")]),n("el-button",{attrs:{type:"warning"},on:{click:function(e){return t.saveCheck("0")}}},[t._v("反审核")])],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.checkData.isshow=!1}}},[t._v("取 消")])],1)],1)],1)},s=[],i=(a("34ef"),a("28a5"),a("ac6a"),a("456d"),a("96cf"),a("1da1")),l=a("fd03"),o=(a("add5"),a("c0e9")),r=a.n(o),c={name:"orderlist",data:function(){return{LabelList:{},is_onlyone:"",dialogFormVisible:!1,bonusData:{field:[],table:[],condition:[],parameter:[]},tableIndex:0,tableNo:0,searchData:[],arr:[],arrs:[],cust_no:"",style_no:"",currency_no:"",subscribe_date:"",tableData:[],activeName:"first",allArr:"",form:{},isedit:!0,isCheck:!1,prev:null,next:null,dialogImageUrl:"",dialogVisible:!1,outData:{isshow:!1,scope:null,index:0,data:{}},excelData:{isshow:!1,scope:null,index:0,data:{}},printData:{isshow:!1,scope:null,index:0,data:{}},checkData:{isshow:!1,scope:null,index:0,data:{}},keyword:"",isAdd:!1,loading:!1,excelValue:"",imgArr:[],pull_cust:[],pull_counter:[],pull_counter2:[],pull_curry:[],pull_sale:[],perData:"",usedCounter:"",nullBtn:!1,pull_style:[],systemSet:"",username:"",printList:{},printDtl:[],outC:"",inC:"",checkHas:"",dtlTotal:"",custP:"",wage_type_pull:[]}},created:function(){this.systemSet=JSON.parse(localStorage.getItem("systemSet")),this.geData(),this.getStoneData(),this.getPermission()},watch:{},methods:{geData:function(){var t=this,e=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});this.isAdd=!1,Object(l["fd"])({}).then((function(e){if(2e3==e.code){if(t.form=e.data.data,t.next=e.data.next,t.prev=e.data.prev,1==t.form.check&&(t.isCheck=!0),e.data.data.dtl[0]){var a=[];for(var n in e.data.data.dtl[0].style_img)e.data.data.dtl[0].style_img[n]&&a.push(e.data.data.dtl[0].style_img[n]);t.imgArr=a}}else"无数据请先添加"!=e.data.info&&"没有这条数据"!=e.data.info||(t.form={dtl:[]},t.nullBtn=!0),t.$message.error(e.data.info)})),e.close()},getStoneData:function(){var t=this;Object(l["T"])({}).then((function(e){2e3==e.code?(t.allArr=e.data,t.pull_cust=e.data.cust,t.pull_counter=e.data.counter,t.pull_counter2=e.data.counter,t.pull_curry=e.data.currency,t.usedCounter=e.data.user_counter,t.pull_style=e.data.style,t.pull_sale=e.data.salesman_no,t.is_onlyone=e.data.params.is_onlyone):t.$message.error(e.msg)}))},searchIt:function(t){var e=this;Object(l["Uf"])({subscribe_no:t}).then((function(t){2e3==t.code?(e.form=t.data.data,e.next=t.data.next,e.prev=t.data.prev,e.outData.isshow=!1,1==e.form.check?e.isCheck=!0:e.isCheck=!1):e.$message.error(t.data.info)}))},refreshData:function(t){this.isedit=!0,this.isAdd=!1,null==t?this.geData():this.searchIt(t)},handelEdit:function(){var t=this;Object(l["yj"])({subscribe_no:this.form.subscribe_no}).then((function(e){console.log(e),2e3==e.code?1==t.isedit&&(0==t.form.check?t.isedit=!1:1==t.form.check&&(t.isCheck=!0)):t.$message.error(e.data.info)}))},saveIt:function(){var t=this,e=this.form,a=this.$refs.xTable1.getTableData().tableData;e["dtl"]=a,e["check"]=1==this.form.check?"1":"0",this.$load.show(),1==this.isAdd?Object(l["Og"])(e).then((function(e){2e3==e.code?(t.$message.success("添加成功"),t.form=e.data.data,t.next=e.data.next,t.prev=e.data.prev,t.isAdd=!1,t.isedit=!0):t.$message.error(e.data.info),t.$load.close()})):Object(l["Dd"])(e).then((function(e){2e3==e.code?(t.$message.success("修改成功"),t.form=e.data.data,t.next=e.data.next,t.prev=e.data.prev,t.isedit=!0):t.$message.error(e.data.info),t.$load.close()}))},add:function(){0==this.isAdd?(this.isedit=!1,this.form={salesman_no:"",subscribe_date:""},this.imgArr=[],this.form.check=!1,this.isAdd=!0,this.isCheck=!1,this.nullBtn=!1,this.form.subscribe_date=this.$getTime(),this.form.currency_no=this.systemSet.currency_no,this.usedCounter&&(this.form.in_counter=this.usedCounter.intcounter_no,this.form.out_counter=this.usedCounter.outcounter_no)):this.$message.error("请先保存再添加下一个")},delOrder:function(){var t=this;this.$confirm("确定要删除该订购单吗？","提示",{type:"warning"}).then((function(){Object(l["Ub"])({subscribe_no:t.form.subscribe_no}).then((function(e){2e3==e.code?(t.$message({message:"删除成功",type:"success"}),null==e.data.data?(t.form={},t.nullBtn=!0):(t.form=e.data.data,1==t.form.check?t.isCheck=!0:t.isCheck=!1),t.next=e.data.next,t.prev=e.data.prev):t.$message.error(e.data.info)}))})).catch((function(){}))},rowChange:function(t){t.row.seq=t.seq},isEdit:function(t){var e=this;Object(l["rh"])({subscribe_no:this.form.subscribe_no,check:1==this.form.check?"1":"0"}).then((function(t){2e3==t.code?(e.$message.success(t.msg),1==e.form.check?e.isCheck=!0:(e.isedit=!0,e.isCheck=!1)):(e.$message.error(t.data.info),1==e.form.check?e.form.check=0:e.form.check=1)}))},firstPage:function(){var t=this,e=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});Object(l["mc"])({}).then((function(e){2e3==e.code?(t.form=e.data.data,t.next=e.data.next,t.prev=e.data.prev,1==t.form.check?t.isCheck=!0:t.isCheck=!1):t.$message.error(e.data.info)})),e.close()},lastPage:function(){var t=this,e=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});Object(l["fd"])({}).then((function(e){2e3==e.code?(t.form=e.data.data,t.next=e.data.next,t.prev=e.data.prev,1==t.form.check?t.isCheck=!0:t.isCheck=!1):t.$message.error(e.data.info)})),e.close()},nextPage:function(){var t=this,e=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});Object(l["ae"])({subscribe_no:this.form.subscribe_no}).then((function(e){2e3==e.code?(t.form=e.data.data,t.next=e.data.next,t.prev=e.data.prev,1==t.form.check?t.isCheck=!0:t.isCheck=!1):t.$message.error(e.data.info)})),e.close()},prevPage:function(){var t=this,e=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});Object(l["gf"])({subscribe_no:this.form.subscribe_no}).then((function(e){2e3==e.code?(t.form=e.data.data,t.next=e.data.next,t.prev=e.data.prev,1==t.form.check?t.isCheck=!0:t.isCheck=!1):t.$message.error(e.data.info)})),e.close()},insertEvent:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={style_no:""},t.next=3,this.$refs.xTable1.insertAt(a,e);case 3:return n=t.sent,s=n.row,t.next=7,this.$refs.xTable1.setActiveCell(s,"style_no");case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),removeEvent:function(){var t=this,e=this.$refs.xTable1.getCheckboxRecords();0==e.length?this.$message.error("请选择你要删除的"):this.$XModal.confirm("您确定要删除该数据?").then((function(e){"confirm"===e&&t.$refs.xTable1.removeCheckboxRow()}))},enterFilterEvent:function(t,e){t.$panel,t.row;13===e.keyCode&&this.insertEvent(-1)},handlePictureCardPreview:function(t){this.dialogImageUrl=t,this.dialogVisible=!0},labelClick:function(){var t=this;this.dialogFormVisible=!0,Object(l["fb"])({subscribe_no:this.form.subscribe_no}).then((function(e){console.log(e,"99999999999999"),2e3==e.code?t.LabelList=e.data:t.$message.error(e.data.info)}))},dialogVisibleModify:function(){this.$print(this.$refs.print)},showOut:function(){var t=this;this.excelData.isshow=!0,Object(l["wc"])({}).then((function(e){2e3==e.code?t.username=e.data.login_staff:t.$message.error(e.msg)}))},outExcel:function(){var t=this,e=this.username;this.excelData.isshow=!1,this.$axios.get(this.$baseURL+"subscribe_export",{params:{token:sessionStorage.getItem("userToken"),login_staff:e,subscribe_no:this.keyword,type:this.excelValue,cust_no:this.cust_no,style_no:this.style_no,currency_no:this.currency_no,subscribe_date:this.subscribe_date},responseType:"arraybuffer"}).then((function(e){var a=new Blob([e.data],{type:"application/x-xls"}),n=document.createElement("a");n.href=window.URL.createObjectURL(a),n.download=t.excelValue+".xlsx",n.click()}))},outTem:function(){var t=this;this.$axios.get(this.$baseURL+"subscribe_template_export",{params:{token:sessionStorage.getItem("userToken"),type:this.excelValue},responseType:"arraybuffer"}).then((function(e){var a=new Blob([e.data],{type:"application/x-xls"}),n=document.createElement("a");n.href=window.URL.createObjectURL(a),n.download=t.excelValue+"模板.xlsx",n.click()}))},activeRowMethod:function(){return 0==this.isedit||(this.$message.error("该状态下不可编辑"),!1)},choseIt:function(t){var e=[];for(var a in t.row.style_img)t.row.style_img[a]&&e.push(t.row.style_img[a]),this.imgArr=e},enterFilterEvents:function(t,e){var a=this,n=(t.$panel,t.row);console.log(n,"row");var s=this.$refs.xTable1.getTableData().tableData;if(13===e.$event.keyCode){console.log("筛选回车事件",e.value,n);for(var i=0;i<s.length;i++)for(var o=i+1;o<s.length;o++)if(s[i].barcode_no&&s[i].barcode_no===s[o].barcode_no)return n.barcode_no="",void this.$message.error("条形码不能有重复的,请重新输入");Object(l["tj"])({barcode_no:n.barcode_no,counter_no:this.form.out_counter}).then((function(t){if(console.log(t,"!!!!!!!"),2e3==t.code){if(a.changeData(t.data),t.data.style_no){n.style_no=t.data.style_no,n.style_name=t.data.style_name,n.qty=t.data.qty,n.gold_no=t.data.gold_no,n.alloy=t.data.alloy,n.barcode_no=t.data.barcode_no,n.type_no=t.data.type_no,n.wgt=t.data.wgt,n.wgt_prc=t.data.wgt_prc,n.add_wage=t.data.add_wage,n.gross_wgt=t.data.gross_wgt,n.qty_prc=t.data.qty_prc,n.discount=t.data.discount,n.amt=t.data.amt,n.remark=t.data.remark,n.specs=t.data.specs;for(var e=0;e<s.length;e++)s[e].style_no&&(s[e].qty=1);console.log(s,"???????????")}a.$forceUpdate()}else a.$message.error(t.data.info)}))}},changeData:function(t){var e=this,a=this.allArr.style.filter((function(e){return e.style_no==t.style_no})),n=this.allArr.style.filter((function(e){return e.style_no==t.style_no}));t.style_no&&(this.imgArr=n[0].img,t.style_name=a[0].style_name),Object(l["ze"])({cust_no:this.form.cust_no,style_no:t.style_no}).then((function(a){2e3==a.code?t.wgt_prc=a.data.salewgt_prc:e.$message.error(a.data.info)})),t.wage_type="",Object(l["od"])({cust_no:this.form.cust_no,style_no:t.style_no}).then((function(t){2e3==t.code?(console.log("333",t.data.wage_type),e.wage_type_pull=t.data.wage_type):e.$message.error(t.data.info)}))},changeDatas:function(t){var e=this;Object(l["pd"])({cust_no:this.form.cust_no,style_no:t.style_no,wage_type:t.wage_type}).then((function(a){2e3==a.code?(console.log("333444",a.data),t.add_wage=a.data.saleadd_prc,t.qty_prc=a.data.saleqty_prc,t.wgt_prc=a.data.salewgt_prc):e.$message.error(a.data.info)}))},test:function(t){return Object.keys(t).filter((function(t){return"_XID"!=t&&"seq"!=t&&"diff_wgt"!=t&&"amt"!=t})).every((function(e){return!t[e]}))},selectName:function(t){var e=this.allArr.style.filter((function(e){return e.style_no==t.row.style_name})),a=this.allArr.style.filter((function(e){return e.style_no==t.row.style_name}));t.row.style_name&&(t.row.style_no=e[0].style_no,this.imgArr=a[0].img)},toImg:function(){var t=this;r()(this.$refs.print,{backgroundColor:"white",useCORS:!0,windowHeight:document.body.scrollHeight}).then((function(e){var a=e.toDataURL();t.img=a,t.download()}))},download:function(){var t=this.img;this.downloadFile("订购单.png",t)},downloadFile:function(t,e){var a=document.createElement("a"),n=this.base64ToBlob(e),s=document.createEvent("HTMLEvents");s.initEvent("click",!0,!0),a.download=t,a.href=URL.createObjectURL(n),a.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))},base64ToBlob:function(t){for(var e=t.split(";base64,"),a=e[0].split(":")[1],n=window.atob(e[1]),s=n.length,i=new Uint8Array(s),l=0;l<s;++l)i[l]=n.charCodeAt(l);return new Blob([i],{type:a})},printContext:function(){this.$print(this.$refs.print)},printOut:function(){var t=this;this.printData.isshow=!0,Object(l["Ae"])({subscribe_no:this.form.subscribe_no,type:"订购单"}).then((function(e){2e3==e.code?(t.printList=e.data,t.printDtl=e.data.dtl,console.log("hhhh",t.printDtl),t.outC=e.data.out_c,t.inC=e.data.in_c,t.checkHas=e.data.build_has,t.dtlTotal=e.data.dtl_total,t.custP=e.data.cust,console.log(e.data)):t.$message.error(e.data.info)}))},countAmount:function(t){var e=t.qty*t.qty_prc+t.wgt*t.wgt_prc+t.wgt*t.add_wage;return t.amt=e,e||0},countWgt:function(t){var e=t.wgt-t.gross_wgt;return t.diff_wgt=e,e||0},countAllAmount:function(t){var e=this;return this.$utils.sum(t.map((function(t){return e.countAmount(t)})))},countAllMoney:function(t){var e=this;return this.$utils.sum(t.map((function(t){return e.countWgt(t)})))},footerMethod:function(t){var e=this,a=t.columns,n=t.data;return[a.map((function(t,a){return 1===a?"合计":"amt"==t.property?"".concat(e.countAllAmount(n).toFixed(e.systemSet.amt)," "):8===a?"".concat(e.countAllMoney(n).toFixed(e.systemSet.wgt)," "):0===a?void 0:2===a||3===a||8===a||9===a||11===a||13===a?"-":8===a||7===a?"".concat(e.$utils.sum(n,t.property).toFixed(e.systemSet.wgt)," "):"- "}))]},getPermission:function(){var t=this;Object(l["xb"])({id:"29"}).then((function(e){2e3==e.code?t.perData=e.data:t.$message.error(e.msg)}))},showInput:function(){null==this.bonusData.field&&(this.bonusData.field=[]),null==this.bonusData.table&&(this.bonusData.table=[]),null==this.bonusData.condition&&(this.bonusData.condition=[]),null==this.bonusData.parameter&&(this.bonusData.parameter=[]);var t="";this.bonusData.field.push(t),this.bonusData.table.push(t),this.bonusData.condition.push(t),this.bonusData.parameter.push(t)},selectOne:function(t){for(var e=0;e<this.allArr.screen_pull.length;e++)this.allArr.screen_pull[e].table==this.bonusData.field[t]&&(this.tableIndex=e);this.arr[t]=this.tableIndex},selectOne1:function(t){for(var e=0;e<this.allArr.screen_pull[this.arr[t]].field.length;e++)this.allArr.screen_pull[this.arr[t]].field[e].name_no==this.bonusData.table[t]&&(this.tableNo=e);this.arrs[t]=this.tableNo},deleteRow:function(t,e){e.splice(t,1)},saveOk:function(){var t=this;console.log(this.bonusData);for(var e=[],a=0;a<this.bonusData.field.length&&this.bonusData.table.length&&this.bonusData.condition.length&&this.bonusData.parameter.length;a++)e[a]={},e[a].table=this.bonusData.field[a],e[a].field=this.bonusData.table[a],e[a].condition=this.bonusData.condition[a],e[a].parameter=this.bonusData.parameter[a];Object(l["Kh"])({data:e}).then((function(e){2e3==e.code?t.searchData=e.data:t.$message.error(e.data.info)}))},searchAll:function(t){if(this.form.cust_no=t,t){for(var e=this.allArr.cust,a=[],n=0;n<e.length;n++)(e[n].cust_no.toLowerCase().indexOf(t.toLowerCase())>=0||e[n].cust_name.indexOf(t)>=0)&&a.push(e[n]);this.pull_cust=a}else this.pull_cust=this.allArr.cust},searchCurry:function(t){if(this.form.currency_no=t,t){for(var e=this.allArr.currency,a=[],n=0;n<e.length;n++)(e[n].kind_no.toLowerCase().indexOf(t.toLowerCase())>=0||e[n].kind_name.indexOf(t)>=0)&&a.push(e[n]);this.pull_curry=a}else this.pull_curry=this.allArr.currency},searchSale:function(t){if(this.form.salesman_no=t,t){for(var e=this.allArr.salesman_no,a=[],n=0;n<e.length;n++)(e[n].login_staff.toLowerCase().indexOf(t.toLowerCase())>=0||e[n].staffr_name.indexOf(t)>=0)&&a.push(e[n]);this.pull_sale=a}else this.pull_sale=this.allArr.salesman_no},searchCounter:function(t){if(this.form.out_counter=t,t){for(var e=this.allArr.counter,a=[],n=0;n<e.length;n++)(e[n].kind_no.toLowerCase().indexOf(t.toLowerCase())>=0||e[n].kind_name.indexOf(t)>=0)&&a.push(e[n]);this.pull_counter=a}else this.pull_counter=this.allArr.counter},searchCounter2:function(t){if(this.form.in_counter=t,t){for(var e=this.allArr.counter,a=[],n=0;n<e.length;n++)(e[n].kind_no.toLowerCase().indexOf(t.toLowerCase())>=0||e[n].kind_name.indexOf(t)>=0)&&a.push(e[n]);this.pull_counter2=a}else this.pull_counter2=this.allArr.counter},refreshs:function(){this.$forceUpdate()},getSystem:function(){var t=this;Object(l["gg"])({}).then((function(e){2e3==e.code?t.systemSet=e.data:t.$message.error(e.data.info)}))},selectCust:function(){var t=this;Object(l["Gh"])({cust_no:this.form.cust_no}).then((function(e){2e3==e.code?t.form.salesman_no=e.data.salesman.salesman_no:t.$message.error(e.data.info)}))},saveCheck:function(t){var e=this,a=this.checkData.data;Object(l["xe"])({begin_date:a.begin_date,end_date:a.end_date,check:t}).then((function(t){2e3==t.code?(e.$message.success(t.msg),e.searchIt(e.form.subscribe_no),e.checkData.isshow=!1):e.$message.error(t.data.info)}))},getRefreshPull:function(){this.pull_cust=this.allArr.cust,this.pull_counter=this.allArr.counter,this.pull_counter2=this.allArr.counter,this.pull_curry=this.allArr.currency,this.pull_sale=this.allArr.salesman_no}}},d=c,u=(a("d2f0"),a("e77a"),a("2877")),f=Object(u["a"])(d,n,s,!1,null,"d5d61224",null);e["default"]=f.exports},b887:function(t,e,a){t.exports=a.p+"img/last1.b6402fd3.png"},d2f0:function(t,e,a){"use strict";var n=a("2f19"),s=a.n(n);s.a},e484:function(t,e,a){t.exports=a.p+"img/next1.ab2ca5a8.png"},e77a:function(t,e,a){"use strict";var n=a("4f94"),s=a.n(n);s.a}}]);
//# sourceMappingURL=chunk-316d1c76.36801f62.js.map